<!DOCTYPE html>
<html class="h-100">
<!-- data-scope-id counter: 2-->
<head>

  <title>DailyHeroes</title>
  <!-- mobile meta tags-->
  <meta name="viewport" content="width=device-width"/>
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">

  <!-- pwa manifest -->
  <link rel="manifest" href="manifest.json"/>
  
  <link href="css/theme.css" rel="stylesheet"/>
  <link href="css/style.css" rel="stylesheet"/>
  <link href="css/widgets.css" rel="stylesheet"/>
  <link href="css/app.css" rel="stylesheet"/>
  
  <!--<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />-->
  <style>
  
    /* fallback */
    @font-face {
      font-family: 'Material Symbols Outlined';
      font-style: normal;
      font-weight: 400;
      src: url(https://fonts.gstatic.com/s/materialsymbolsoutlined/v153/kJF1BvYX7BgnkSrUwT8OhrdQw4oELdPIeeII9v6oDMzByHX9rA6RzaxHMPdY43zj-jCxv3fzvRNU22ZXGJpEpjC_1v-p_4MrImHCIJIZrDCvHOej.woff2) format('woff2');
      /*src: url(fonts/MaterialSymbolsRounded[FILL,GRAD,opsz,wght].woff2) format('woff2');*/
    }
  
  </style>
  
  <!-- # webcomponents -->
  <!-- ## modal-v2 -->
  <link href="css/modal-v2.css" rel="stylesheet"/>
  <script src="js/web-components/modal-v2.js"></script>
  
</head>
<body data-view-group="platform auth build" data-view-states="" class="h-100 ov-hidden">
  
  [ {max-width:500px;m:auto} .container-app .h-100 data-view-group="features" data-view-states=""

    [ {max-width:100%;mw:400px;margin:auto;} .d-grid .h-100 .container-app-inner data-view-group="screens" data-view-states="home"
    
      <section class="container-screen _containerScreenHome ov-auto pos-relative container-screen-home" data-view-group="screens" data-view-name="home">
      <!-- # screen : home -->
        
        <!-- # navigations-->
        [ .d-flex .justify-content-between .main-nav-bar .z-index-1 .top-0 .pos-sticky
          [ 
            [ data-view-group="platform" data-view-name="web"
              [btn .clickable data-callback="turn-off-screen" .d-flex .align-items-center {gap:0.3rem} 
                Fake screen off [s .icon-mate 'bolt']
              ]
            ]
          ]
          [ .d-flex {gap:0.3rem}
          
            <!-- # nav : tasks by threshold -->
            [btn .d-flex .align-items-center data-onclick="open-overview" style="gap:0.3rem;"
              [s 'Targets'] [s .icon-mate 'flag']
            ]
          
            <!-- # tracker timer -->
            [btn .clickable .d-flex .align-items-center {gap:0.3rem} data-callback="navigate-screen" data-view-target="trackers" .btn-border-0
              Trackers [s .icon-mate 'timer']
            ]
            [ .separator-vertical]
            [btn .clickable data-callback="navigate-screen" data-view-target="settings" .icon-mate 'settings' .btn-border-0]
          ]
        ]

        
        <!-- # home screen body -->
        
        <!-- # interactive sequence task pick -->
        [ data-view-group="features" data-view-name="interactive-sequence-task-pick" .padding-container
          [ {bg:#bfdfff} {rad:4px;p:0.5rem}
            [ {fs:0.7rem}
              [s 'Sequence Task Linking' {fw:bold}] [mark 'beta' {p:2px 4px;} {rad:4px}]
            ]
            [ .void-half]
            [ .d-flex {gap:0.5rem}
              [small .flex-1
                Instruction : Browse and pick tasks to add as sequence, then click <b>Finish</b>.
              ]
              [btn 'Finish' .btn data-onclick="finish-interactive-sequence-pick"]
            ]
          ]
          [ .void-half]
          [ .void-half]
        ]
        
        <!-- # container task view mode-->
        <section data-view-group="task-view-mode" data-view-states="task" class="container-task-view">
          
          [ .d-flex
            
            <!-- # search feature toggler -->
            [ .d-flex .align-items-center .p-half
              [btn 'search' .icon-mate data-onclick="toggle-search-feature"]
            ]
          
            [ .flex-1
              <!-- # widget tabs -->
              [ .d-grid {cols:1fr 1fr auto} ._viewMode .container-view-mode .wg-Tab
                [btn data-onclick="change-view-mode" data-kind="control" data-type="mission"
                  [ .d-flex .align-items-center {gap:0.5rem} .justify-content-center
                    [s .icon-mate 'list']
                    [s 'Missions']
                    [ .d-flex .tab-active-indicator]
                  ]
                ]
                [btn data-onclick="change-view-mode" data-kind="control" data-type="task"
                  [ .d-flex .align-items-center {gap:0.5rem} .justify-content-center
                    My Tasks
                    [ .d-flex .tab-active-indicator]
                  ]
                ]
              ]
            ]
            
          ]
          
          
        [ data-view-group="features" data-view-name="search-bar"
          [ .d-flex .justify-content-between .gap-half .align-items-center .p-half
        
            <!-- # search -->
            [ .wg-Search
              [ .inner
                <input id="node-filter-box" type="text" placeholder="Search" class="inputable input-style-default" data-callback="save-word-template"/>
                [ .d-none
                  Filter by label :
                  [in .inputable .input-style-default data-callback="save-label-filter" #in-filter-search-label]
                ]
              ]
            ]
            [ .void-full]
          ]
        ]
      
        [ .p-half
        
          <!-- # mission collection -->
          [ data-view-group="task-view-mode" data-view-name="mission"
            

            [ .d-grid {gap:0.3rem} {cols:1fr auto} .align-items-center
              
              [ .ov-auto
                [s .txt 'Collection'] [sel #in-sel-mission-group .changeable data-callback='on-mission-group-change']
                [ .mb-xs]
              ]
              
              <!-- # collection actions -->
              [ .d-flex {gap:0.3rem}
                [btn data-onclick="new-collection" .icon-mate 'add' .btn-glass .obsoletes]
                [btn 'Manage Collection' data-callback="navigate-screen" data-view-target="collections" .clickable .btn-glass]
              ]
              
            ][ .mb-m]
          ]
          
          <!-- # filter by target time -->
          [ data-view-group="task-view-mode" data-view-name="task" .obsoletes
            [ .d-flex .align-items-center .user-select-none
              [in type='checkbox' id='labeled-by-showtarget' .inputable data-callback="toggle-show-target-only"] 
              [l for='labeled-by-showtarget' .d-flex .align-items-center
                [small .txt 'Show only task with target time (>= 10m)']
              ]
            ]
            [ .void-half]
          ]
          
          [ data-view-group="task-view-mode" data-view-name="task filter-target"
            
            <!-- # breadcrumbs -->
            [ .d-flex .justify-content-between
              [ #container-breadcrumbs ._wgBreadcrumbs .container-breadcrumbs data-onclick="handle-click-breadcrumbs" .widget-breadcrumbs .skin-default]
            ]
            [ .void-full]
            
            [ data-view-group="task-view-mode" data-view-name-not="filter-target" .justify-content-between .d-flex .gap-half
              
              [ {fs:0.7em} .d-flex .flex-column .gap-quarter .align-items-start
                [ #txt-nav-task-cap-time .task-target-time]
                [ #txt-nav-task-target-cap-time .task-target-cap-time]
              ]
              
              [ .d-flex .gap-quarter
                <!-- # nav : compact mode -->
                [btn .d-flex .align-items-center data-onclick="toggle-compact-view" style="gap:0.3rem;" .btn-glass
                  [s 'Compact view'] [s .icon-mate 'density_small']
                ]
                <!-- # nav : priority mapper -->
                [btn .d-flex .align-items-center data-onclick="open-priority-mapper" style="gap:0.3rem;" .btn-glass
                  [s 'Priority Mapper'] [s .icon-mate 'linear_scale']
                ]
              ]
              
            ]
            [ .void-half]
            
          ]
          [ .void-half]
  
          <!-- widget ETA -->
          [ .wg-ETA data-view-group="task-view-mode" data-view-name="mission" 
            [ .d-flex .justify-content-between .gap-quarter
              [
                <!-- # total mission targets -->
                [small .align-items-center .d-flex .gap-quarter
                  Total target :
                  [mark #txt-total-target .task-target-time .obsoletes]
                  [s #txt-total-target-cap .task-target-cap-time]
                ]
              ]
            ]
          ]
          [ .void-full]
          
          
          <!-- # task list container -->
          <div id="tasklist-container" class="container-task">
            <!-- # widget task -->
            <!-- # widget-task.skin-default -->
            <!-- # widget-task.skin-compact -->
            [ data-eid="widget-task" ._wgTaskList #tasklist .widget-task .skin-default data-onclick="handle-task-click" data-ondblclick="task-dblclick-handler"]
            [ .void-full]
            <div id="tasklist-completed" class="clickable" data-callback="handle-task-click"></div>
          </div>
          
          <!-- # sort task option -->
          [ .obsoletes
            [ .d-flex .align-items-center .user-select-none
              [in type='checkbox' id='labeled-by-sortbyprogress' .inputable data-callback="toggle-sort-by-progress"] 
              [l for='labeled-by-sortbyprogress' .d-flex .align-items-center
                [small .txt 'Ascending sort by total progress time']
              ]
            ]
            [ {mb:0.5rem}]
          ]
        
        ]
        
        <!-- # add task -->
        <!-- empty gap for floating button -->
        [ {h:150px}] 
        
        
          <taskdrawer-v1></taskdrawer-v1>
        
        </section>
        
        
      </section>
      
      <section class="container-screen" data-view-group="screens" data-view-name="task-detail">
      <!-- # task detail screen -->
      
      [ .d-grid .h-100 {rows:auto 1fr} .pos-relative
    
        <!-- # task detail overlay background -->
        [ .overlay-bg-default]
        
        <!-- # task detail screen nav -->
        [ .d-flex {gap:1rem} .align-items-center .container-screen-title .pos-sticky .top-0 .z-index-1
          [btn .clickable data-callback="navigate-screen" data-view-target="home" .icon-mate 'chevron_left' .btn-nav]
          [ 'Task' {fw:bold}]
        ]
        
        <!-- # task detail screen body -->
        [ .padding-container .page-TaskDetail
          
           [ data-eid="widget-task" .widget-task .skin-default data-onclick="handle-task-click" data-ondblclick="task-dblclick-handler"]
          
        ]
        
        <taskdrawer-v1></taskdrawer-v1>
      
      ]
      </section>
      
      <section class="container-screen" data-view-group="screens" data-view-name="collections">
      <!-- # collections screen -->
      
      [ .d-grid .h-100 {rows:auto 1fr} .pos-relative
      
        <!-- # overlay background -->
        [ .overlay-bg-default .overlay-bg-collections]
        
        <!-- # collection screen nav -->
        [ .d-flex {gap:1rem} .align-items-center .container-screen-title .pos-sticky .top-0 .z-index-1
          [btn .clickable data-callback="navigate-screen" data-view-target="home" .icon-mate 'chevron_left' .btn-nav]
          [ 'Collections' {fw:bold}]
        ]
        
        <!-- # collection screen body -->
        [ .padding-container .pos-relative
        
          [ .void-half]
          [ .void-half]
          
          [btn 'New collection' data-onclick='new-collection']
          
          [ .void-half]
          [ .void-half]
          
          <!-- ### list collection -->
          [ data-container="list-collection" data-onclick="handle-click-list-collection"]
          
        ]
      
      ]
      </section>
        
      
      <section class="container-screen" data-view-group="screens" data-view-name="trackers">
      <!-- # trackers screen -->
        
        <!-- # trackers nav header -->
        [ .d-flex {gap:1rem} .align-items-center .container-screen-title
          [btn .clickable ._backNavBtn data-callback="navigate-screen" data-view-target="home" .icon-mate 'chevron_left' .btn-nav]
          [ 'Trackers' {fw:bold}]
        ]

        <!-- # screen body -->
        [ .padding-container .bg-white
        
          [ .void-half]
          [ .void-half]
          
          [btn 'New tracker' .clickable data-callback='new-tracker']
          
          <!-- # container trackers -->
          [ .widget-Trackers
            [ #container-list-tracker .clickable data-callback="handle-click-list-tracker"]
          ]
          
        ]
        
      </section>
      
      <section class="container-screen h-100 pos-relative" data-view-group="screens" data-view-name="by-threshold">
      <!-- # tasks by threshold screen -->
      
      [ .d-grid .h-100 {rows:auto 1fr}
      
        <!-- # Tasks By Threshold screen nav -->
        [ .d-flex {gap:1rem} .align-items-center .container-screen-title .pos-sticky .top-0 .z-index-1
          [btn .clickable ._backNavBtn data-callback="navigate-screen" data-view-target="home" .icon-mate 'chevron_left' .btn-nav]
          [ 'Targets Overview' {fw:bold}]
        ]
      
        <!-- # Tasks By Threshold screen body -->
        [ .padding-container .pos-relative
          [ .pb-full]
          
          [small
            Info : only targets above threshold are shown in the list.
          ]
          [
            Target threshold : 
            [s #txt-target-threshold]
            [btn 'Edit' data-onclick="edit-target-threshold"]
          ]
          [ .void-full]
          
          [ .ov-auto
            [ {bg:#1b1b1b;rad:4px}
              [ .void-half]
              <!-- # widget-task.skin-targets -->
              [ .widget-task .skin-targets #list-tasks-by-threshold data-onclick="handle-click-task-overview" data-ondblclick="handle-dblclick-task-overview"]
              [ .p-half]
            ]
            [ .void-full]
          ]
        ]
        
      ]
      </section>
      
      <section class="container-screen h-100 pos-relative" data-view-group="screens" data-view-name="priority-mapper">
      <!-- # priority mapper screen -->
      
      [ .d-grid .h-100 {rows:auto 1fr}
      
        <!-- # overlay background -->
        [ .overlay-bg-default .overlay-bg-priority-mapper]
        
        <!-- # priority mapper screen nav -->
        [ .d-flex {gap:1rem} .align-items-center .container-screen-title .pos-sticky .top-0 .z-index-1
          [btn .clickable data-callback="navigate-screen" data-view-target="home" .icon-mate 'chevron_left' .btn-nav]
          [ 'Priority Mapper' {fw:bold}]
        ]
        
        <!-- # priority mapper screen body -->
        [ .padding-container .pos-relative
        
          [ .void-half]
          [ .void-half]
          
          [ .pos-relative
            [ .d-flex .justify-content-end
              [btn 'Save' .clickable data-callback='save-priority-mapper']
            ]
            [ .void-half]
            
            [small 'Guide : Adjust the slider for each task to determine its priority relative to the other tasks.']
            [ .void-half]
            [ .void-half]
            
            <!-- # priority mapper items container -->
            [ .d-flex .justify-content-end
              [small 'ROP (Ratio Of Priority)' {fw:bold}]
            ]
            [ {border-bottom:1px solid grey} {m:4px 0} {op:0.2}]
            [ data-container="list-priority-mapper" .inputable data-callback="handle-input-priority-slider"]
          ]
          
        ]
      
      ]
      </section>
      
      <section class="container-screen h-100 pos-relative" data-view-group="screens" data-view-name="settings">
      <!-- # settings screen -->
      
      [ .d-grid .h-100 {rows:auto 1fr} .pos-relative
        
        <!-- # settings nav header -->
        [ .d-flex {gap:1rem} .align-items-center .container-screen-title .pos-sticky .top-0 .z-index-1
          [btn .clickable ._backNavBtn data-callback="navigate-screen" data-view-target="home" .icon-mate 'chevron_left' .btn-nav]
          [ 'Settings' {fw:bold}]
        ]
        
        <!-- # settings screen body -->
        [ .pos-relative
        
          
          <!-- # widget-settings.skin-default -->
          [ .widget-settings .skin-default .d-grid {gap:0.3rem}
            
            <!-- application data -->
            [ .settings-group
              [ 'Application Data' .settings-group-title]
              [ .mb-m]
              [ .settings-card-inner
                [
                  [btn 'Reset data' data-onclick="reset-data" .widget-btn-danger]
                  [btn 'Reset tasks progress and target' data-onclick="reset-target-time"]
                ]
              ]
              
            ]
            
            <!-- backup and restore -->
            [ .settings-group
              [ 'Backup and Restore' .settings-group-title]
              [ .mb-m]
              
              [ .settings-card-inner
                [small 'Backup to Google Drive.'][ .mb-m]
                [ .d-flex {gap:0.3rem}
                  <button class="clickable" data-callback="authorize">Authorize</button>
                  [ data-view-group="auth" data-view-name="authorized"
                    [btn .clickable data-callback="backup-to-cloud" 'Backup' #btn-cloud-backup]
                    [btn .clickable data-callback="restore-from-cloud" 'Restore' #btn-cloud-restore]
                  ]
                ]
                [
                  [ #txt-backup-status]
                  [ #txt-restore-status]
                ][ .mb-m]
                
                <!-- # local backup -->
                [small 'Local backup and restore.'][ .mb-m]
                [ .d-flex {gap:0.3rem}
                  [btn 'Download' .clickable data-callback="backup-data"]
                  [btn 'Upload' .clickable data-callback="restore-data"]
                ]
              ]
              
            ]
            
            <!-- global preset timer -->
            [ .settings-group
              [ 'Timer Preset' .settings-group-title]
              [ .mb-m]
              [ .settings-card-inner
                
                [small 'Default task duration (Lowest allowed is 1 minute).']
                [ .pb-full]
                
                [ .d-flex .justify-content-between
                  [
                    Task duration : 
                    [s #txt-global-preset-timer .font-weight-bold] 
                  ]
                  <button class="clickable" data-callback='change-global-preset-timer'>Change</button>
                ]
                [ .void-half]
                
              ]
              
            ]
            
            <!-- sound -->
            [ .settings-group
              [ 'Alarm Sound' .settings-group-title]
              [ .mb-m]
              [ .settings-card-inner
                
                [ .d-flex .flex-wrap .gap-half
                  [btn 'Set audio' .clickable data-callback="pick-audio"]
                  [btn 'Remove audio' .clickable data-callback="remove-audio"]
                  [btn 'Test audio' .clickable data-callback="test-audio"]
                  [btn 'Stop test' .clickable data-callback="stop-test-audio"]
                ]
                [ .void-half]
                
                [ .d-flex .align-items-center .gap-half
                  Volume : [in data-jsq="alarm-volume" type="range" min="0.2" max="1" step="0.1" value="1" data-oninput="handle-input-alarm-volume"]
                ]
                
              ]
            ]
            
            <!-- web app installation -->
            [ .settings-group data-view-group="platform" data-view-name="web" .d-grid {gap:0.3rem}
              [
                [ 'Web App' .settings-group-title]
                [ .mb-m]
                [ .settings-card-inner
                  [btn #buttonInstall 'Install']
                ]
              ]
            ]
            
            <!-- app cache -->
            [ .settings-group data-view-group="platform" data-view-name="web"
              [ 'Updates & Offline Access' .settings-group-title]
              [ .void-half]
              
              [ .settings-card-inner
              
                [ .d-grid {gap:0.3rem}
                  [
                    <button onclick="pwaCacher.update()">Check for updates</button>
                  ]
                  [
                    <button onclick="pwaCacher.removeUpdate()">Remove app cache *</button>
                  ]
                ]
                [ .void-half]
                [small '*) Removing app cache will disable offline access until you update the app manually by clicking on <b>Check for updates</b> button.']
              
              ]
            ]
            
          ]
          
        
        ]
        
      ]
      </section>
      
    
    ]

  ]
  
  <section class="container-screen-off">
    <!---->
  </section>
  
  
  <style>
    #update-notif {
      display: none;
    }
    #update-notif.active {
      display: block;
    }
  </style>
  <div id="update-notif" style="position:fixed;bottom:0;left:0;width:100%;background:#0b0b0e;color:#ccc;z-index:8177;font-weight:bold">
    [ .d-grid {cols:1fr auto}
      [ {p:16px} 'New version available']
      [ {d:grid} {cols:1fr 1fr}
        [ #btn-refresh {padding:16px;text-transform:uppercase;font-weight:bold;color:#d8d782;} 'Refresh']
        [ #btn-dismiss {padding:16px;text-transform:uppercase;font-weight:bold;} 'Dismiss']
      ]
    ]
  </div>
  
  
  <!-- $TEMPLATES # -->
  
  <template id="taskdrawer-v1">
    
    <!-- # widget active task -->
    [ .wg-ActiveTask data-scope-id="2" ._wgActiveTask

      [ .d-flex .inner .sc-2 .flex-column .gap-half
        [ .sub-inner .sc-2
          
          [ .pos-relative
            <!-- # floating buttons -->
            [ .d-flex .justify-content-between
              <!-- # widget tracker -->
              [ .pos-absolute {b:0}
                [ .wg-TrackerChip .tracker-overlay .d-grid data-view-group="features" data-view-name="tracker-overlay"
                  [ .d-grid {gap:0.25rem}
                    [ .d-flex {gap:0.3rem} .justify-content-between 
                      [ .d-inline-flex {gap:0.3rem}
                        [ data-slot="title" .word-break-all]
                        [ data-slot="progressTimeStr"]
                      ]
                      [
                        [btn 'close' .icon-mate .clickable data-callback="stop-tracker" {font-size: 0.7rem;padding: 2px 6px;}]
                      ]
                    ]
                  ]
                ]      
                [ .void .void-full]
              ]
              
              <button class="btn-add-task bg-white" data-lazy-onclick="show-modal-add-task">
                [s .icon-mate 'add' {fs:2.2rem}]
                [ .pos-absolute {b:6px}
                  [small data-view-group="platform" data-view-name="web" '(Alt+N)' .text-center {fs:0.5rem}]
                ]
              </button>
            ]
          ]
          
          
          <!-- # progress bar -->
          [ .flex-1 data-view-group="active-task-info" data-view-states="" .bg-white .drawer
            
            [ .d-flex .gap-half
            
              [ .wg-ActiveTaskProgressBar .d-flex .flex-column .gap-quarter
              
                [ .d-flex .gap-quarter
                  <div class="NzE2ODYyNQ-progress-bar-container">
                    <div class="NzE2ODYyNQ-progress-bar">
                      <div class="NzE2ODYyNQ-progress-bar-fill"></div>
                      <span class="NzE2ODYyNQ-progress-bar-text"><span id="txt-countdown">00:00:00</span></span>
                    </div>
                  </div>
                  [small #txt-active-task-target-cap .task-target-cap-time]
                ]
                
                
                [ data-view-group="active-task-info" data-view-name="has-ETA"
                  [ .d-flex .flex-wrap .gap-quarter .align-items-center 
                    <!-- # mission target ETA -->
                    [small 
                      [ .d-flex .gap-quarter .align-items-center
                        [s 'ETA']
                        [s #txt-target-eta .label-eta]
                      ]
                    ]
                  ]
                ]
                
              ]
              
              <!-- active task: task info -->
              [ .d-flex .flex-column .gap-half .task-info
              
                <section class="d-flex gap-quarter flex-wrap">
                  [ .d-flex .flex-wrap .justify-content-between .gap-quarter 
                    <!-- # active task info -->
                    [
                      [small #txt-active-task-name {fw:bold;word-break:break-word}] 
                    ]
                    
                    <!-- # active time target time -->
                    [small data-view-group="active-task-info" data-view-name="has-target"
                      [ .d-flex .gap-quarter
                        [ .obsoletes
                          [mark #txt-active-task-target .task-target-time]  
                        ]
                        [s #txt-active-task-target-limit .obsoletes]
                      ]
                    ]
                  ]
                
                  <!-- # active task sequence info -->
                  [ data-view-group="active-task-info" data-view-name="is-sequence"
                    [small #txt-active-task-sequence-name {word-break:break-word;ft:italic}] 
                  ]
                
                  
                  <!-- # open task button -->
                  [ .d-flex .justify-content-between .obsoletes
                    [button data-onclick="open-task-into-view" .bg-white .obsoletes
                      [small .icon-mate 'open_in_new']
                    ]
                    
                    <!-- # pip button-->
                    [button data-onclick="open-pip" .bg-white data-view-group="platform" data-view-name="web" .obsoletes
                      [small 'picture_in_picture' .icon-mate]
                    ]
                  ]
                </section>
              
              ]
              
            ]
          ] 
        ]
        <!-- #END progress bar -->
        
        <!-- # toggle active task timer -->
        [ .d-flex .flex-column {gap:0.5rem} .obsoletes
        
          <div data-obj="stop-timer">
            [ .d-grid {gap:0.35rem} {h:2.2rem}
              <button class='clickable btn-timer-control-stop d-flex align-items-center justify-content-center' style="gap:0.3rem" data-callback='stop-timer'>
                [s .icon-mate 'stop']
              </button>
              <button class='clickable btn-timer-start btn-timer-control-start d-flex align-items-center justify-content-center' style="gap:0.3rem" data-callback='start-or-restart-timer'>
                [s .icon-mate 'play_arrow']
              </button>
              [small data-view-group="platform" data-view-name="web" '(Alt+S)' .text-center .obsoletes]
              <button class='clickable d-none' data-callback='finish-timer'>Finish (F)</button>
            ]
          </div>
          
        ]
      
      ]
      
      
      [ .d-none
        <div style="height:2px;"></div>
        <div class="progress-bar-container">
          <div class="progress-bar">
            <div class="progress-bar-fill"></div>
            <span class="progress-bar-text"><span id="percentage"></span></span>
          </div>
        </div>
      ]
      
    ]
    
  </template>
  
  
  <template id="tmp-pip-doc">
    <!-- # tmp-pip-doc -->
    <file src="html/pip-doc.html"></file>
  </template>
  
  <template id="tmp-list-tracker">
    <!-- # container tracker -->
    [ data-kind="item" data-id=""
      [ data-slot="title"]
      [ 
        [small data-slot="progressTimeStr"]
      ]
      [ .d-flex .justify-content-end {gap:0.3em}
        [btn 'Rename' data-action="rename"]
        [btn 'Delete' data-action="delete"]
        [btn 'Overlay' data-action="set"]
        [btn 'Track' data-action="toggle-active"]
      ]
    ]
  </template>
  
  <template id="tmp-list-collection">
    <!-- # tmp-list-collection -->
    [ data-kind="item" data-id="" {border-bottom:1px solid lightgrey} .d-flex {gap:0.7rem} {padding:0.5rem}
      [ data-slot="title" .flex-1]
      [ .d-flex .justify-content-end {gap:0.3em}
        [btn 'Rename' data-action="rename"]
        [btn 'Delete' data-action="delete"]
      ]
    ]
  </template>
  
  <template id="tmp-list-priority-item">
    <!-- # tmp-list-priority-item -->
    [ data-kind="item" data-id="" .item
      [
        [ .d-flex .justify-content-between
          [s data-slot="title"]
          [small data-slot="ropStr"]
        ]
        [ 
          [small data-slot="progressTimeStr"]
        ]
      ]
      [ .d-grid
        [in type="range" min="0" max="100" value="0" .in-priority-slider]
      ]
    ]
  </template>
  
    
  <template id="tmp-task">
    <!-- # container task -->
    [ .wg-TaskCard data-obj="task" data-id="" data-kind="task" data-view-group="task" data-view-states="" data-scope-id="1" 
      
    	[ .container-item .pos-relative
    	  
    	  [ .d-none
    	    <!-- # add to mission button -->
          [ data-view-group="task-view-mode" data-view-name="task"
            [ .pos-absolute .container-task-mission-actions
              [btn .btn-toggle-mission data-role="add-to-mission" title="Add to mission" .icon-mate
                playlist_add
              ]
              [btn .btn-toggle-mission data-role="remove-mission" title="Remove from mission" .icon-mate
                playlist_remove
              ]
            ]
          ]
        ]
    
    	  <!-- # task body -->
    	  [ .task-body-main
    	  
    	    <!-- # star action -->
  	      [ .d-flex .align-items-star
  	        [ data-view-group="task-view-mode" data-view-name-not="filter-target"
              [btn .btn-star data-role="star-task" title="Star this task" .icon-mate
                star
              ]
            ]
          ]
    	  
    	    <!-- # task top info -->
    	    [
    	    
    	      <!-- # task info (title) -->
        	  [ .d-flex .justify-content-between {gap:0.3rem}
        	    [ .flex-1
          	    [ data-slot="missionPath" data-slot-html .task-path]
          	    [s .title data-slot="title"]
        	    ]
        	    [ .obsoletes
          	    [ .d-none
          	      <span data-slot="label"></span>
          	    ]
                [ {fs:0.7rem}
                  <span data-slot="rankLabel"></span>
                  [s .label-finish-count]
                ]
        	    ]
        	  ]
        	  
        	  [ .mb-m]
        	  
        	  <!-- # time progress info -->
        	  [ {fs:0.7rem;} .d-flex .gap-half .obsoletes
        	    
              [ {flex:1} 
                [s data-view-group="task" data-view-name-not="sequence-mode"
              	  <span data-obj="progress" data-slot="progress"></span>
              	  <span data-obj="live-progress"></span> / <small data-slot="allocatedTimeString"></small>
                ]
            	  <span data-slot="totalProgressStr"></span>
            	  [s data-view-group="task" data-view-name-not="sequence-mode"
              	  --
          	      <span data-slot="targetString"></span> 
            	  ]
        	      <span class="d-none" data-slot="completionPercentage"></span>
          	  ]
          	  
          	  [ .d-flex .flex-column 
                <span data-slot="ratio" data-view-group="task-view-mode" data-view-name-not="filter-target"></span>
          	  ]
          	  
        	  ]
          
        	  <!-- # task notes -->
        	  <div style="margin-top:1rem;">
        	    <div data-slot="note" data-template='#tmp-notes'></div>
        	  </div>
        	  
      	  ]
      	  
      	  [ .d-grid .align-items-center {gap:0.5rem}
      	    
      	    <!-- # collection save button (old) -->
      	    [ data-view-group="features" data-view-name="interactive-sequence-task-pick"
        	    [ .d-flex .justify-content-end .flex-column {gap:0.3rem}
          	    [btn 'Add to sequence' data-role="add-to-sequence"]
          	    [btn 'Move to sequence' data-role="move-to-sequence" data-view-group="task-view-mode" data-view-name="mission"]
        	    ]
      	    ]
      	    
      	    [ data-view-group="features" data-view-name-not="interactive-sequence-task-pick"
        	    [ .d-flex .justify-content-end {gap:0.5rem}
                
        	      <!-- # task quick actions -->
                [ .d-flex .gap-half .align-items-center
                  [btn .btn-target data-role="set-target-time" title="Add target time" .icon-mate
                    flag
                  ]
                  [btn ._btnStart .btn-start data-role="start" data-group="active not-running" title="Start" .icon-mate
                    play_arrow
                  ]
                  [btn ._btnStop .btn-stop data-role="stop" data-group="active" title="Stop" .icon-mate
                    stop
                  ]
                  [btn .btn-expand data-role="expandToolbar" title="Expand" .icon-mate
                    more_vert
                  ]
                ]
                
        	    ]
      	    ]
      	    
      	  ]
    	  
    	  ]
    	  
    	  <!-- # task toolbar -->
    	  [ .container-task-toolbar data-view-group="task" data-view-name="toolbarExpanded"
  
      	  [ .d-flex .justify-content-between data-slot="" data-template="#tmp-mission-buttons" {p:0.5rem}]
          
          <div data-obj="tracking-status" style="height:4px;"></div>
        	
        	[ .d-none
          	<div class="NzA5ODc1NQ-progress-bar-container">
              <div class="NzA5ODc1NQ-progress-bar" data-role="progress-bar-container">
                <div data-role="progress-bar" class="NzA5ODc1NQ-progress-bar-fill"></div>
              </div>
            </div>
        	]
    	  ]
    	  
    	  <!-- # running task indicator -->
      	<div class="task-progress-bar-container">
          <div class="task-progress-bar"></div>
        </div>
        
    	  <!-- # sequence container -->
    	  [ data-view-group="task" data-view-name="sequence"
          <!-- # sequence toolbar -->
          [ data-view-group="task" data-view-name="toolbarExpanded"
            [ {p:0.5rem} .d-flex .flex-wrap .gap-half .justify-content-between
              [ .d-flex .flex-wrap .gap-half
                [btn '+ New' data-role="add-sequence-task"]
                [btn 'Link a task' data-role="link-task-to-sequence-interactive-mode"]
                [btn 'Reset repeat count' data-role="reset-count-active-seq"]
                [btn 'Manage' data-role="manage-sequence"]
              ]
              [
                [btn .btn-star .icon-mate 'refresh' title="Reset sequence" data-role="reset-sequence"]
              ]
            ]
          ]
          <!-- # sequence list -->
          [ data-container="sequence-tasks" ]
    	  ]
        
    	  
    	  <!-- # time progress info : below card -->
    	  [ {fs:0.7rem;} .d-flex .gap-half .justify-content-between {bg:#232425} {p:0 8px;}
    	    
    	    [ .d-flex .gap-half
      	    <!-- # timer info -->
    	      [ data-view-group="task" data-view-name-not="sequence-mode" {p:10px 0 6px;}
      	      [ .d-flex .gap-quarter
                [s .icon-mate 'timer']  [s data-slot="durationTimeStr"]   
      	      ]
    	      ]
    	      
            <!-- # target time left -->
            [ data-view-group="task" data-view-name="has-target" {p:10px 0 6px;}
              [ .d-flex .align-items-center {gap:0.2rem} .gap-quarter
                [s .icon-mate 'flag']
                [mark data-slot="ratioTimeLeftStr" data-slot-html .task-target-time .sc-1]
                [s data-slot="targetCapTimeStr" data-slot-html .task-target-cap-time .sc-1]
                [ data-slot="sequenceTargetTotalTime" data-slot-html .task-sequence-target-cap-time]
              ]
            ]
    	    ]
    	    
    	    <!-- # folder indicator -->
    	    [ .d-flex .align-items-center
    	      [ data-view-group="task" data-view-name="hasSubTask"
    	        [btn .btn-navigate-sub data-role="navigate-sub"
                [s .icon-mate 'folder']
                [s .icon-mate 'chevron_right' .opacity-half]
    	        ]
    	      ]
    	    ]
          
        ]
    	]
      [ .void .void-full]
    ]
  </template>
  
  <template id="tmp-task-simple-v2">
    <!-- # container task simple mode -->
    
    [ data-kind="task" data-id="?"
    	[ .container-item data-view-group="task" data-view-states="collection-only" .pos-relative
  
    	  <!-- # simple mode : task body -->
    	  [ .task-body-main .px-half .py-quarter .d-flex .gap-full
    	  
      	  [ .d-flex .justify-content-between {gap:0.3rem} .flex-grow
      	    [ .d-flex .w-100
      	      <!-- # simple mode : task path -->
        	    <!--[ data-slot="missionPath" data-slot-html .task-path]-->
        	    <span class="title" data-slot="title"></span>
        	    [ .flex-1 .item-title-border .pos-relative .align-items-center .d-flex .p-half]
      	    ]
            [ .d-flex .gap-half .align-items-center
              [small
                <!-- # simple mode : target time -->
                [mark .task-target-time data-slot="ratioTimeLeftStr" data-slot-html]
          	  ]
              [ data-view-group="task" data-view-name-not="is-collection"
          	    [btn 'playlist_add' data-role="toggle-add-collection" class="icon-mate" title="Add to collection"]
          	  ]
              [ data-view-group="task" data-view-name="is-collection"
                [btn 'playlist_remove' data-role="toggle-add-collection" .bg-danger .icon-mate title="Remove from collection"]
              ]
        	  ]
      	  ]
      	  
      	  [ .container-task-toolbar .d-flex .gap-full .obsoletes
        	  [ .d-flex .justify-content-between data-slot="" data-template="#tmp-mission-buttons-simple"]
    	    ]
      	  
    	  ]
    	  
    	  
    	]
  	  [ .container-child-tasks]
	  ]
  	
  </template>

  <template id="tmp-list-sequence-task">
    <!-- # tmp-list-sequence-task -->
    [ .wg-SequenceTask .item-sequence data-kind="item-sequence-task" data-view-group="sequence-item" data-view-states=""
      [ .d-flex
        
        <!-- # sequence drag handle -->
        [ 
          [ .d-flex .align-items-center .handle {pl:4px} .h-100
            [s .icon-mate 'drag_indicator']
          ]
        ]
        
        <!-- # sequence title -->
        [ .word-break-word .flex-1 .align-items-center .d-flex data-closest="title" {p:4px 10px} .user-select-none
          [ .d-flex .justify-content-between .w-100 
            [
              [ data-slot="linkedTaskPath" data-slot-html]
              [ .void-tenth]
              [small 
                [s data-slot="title"]
                [ .void-half]
                [ .d-flex .gap-quarter .align-items-center {op:0.8}
                  <!-- # sequence timer info -->
                  [s .icon-mate 'timer' {fs:0.7rem}] 
                  [ {fs:0.8em}
                    [s data-slot="targetTimeStr"] 
                    [ .obsoletes
                      ([s data-slot="timeLeftStr"])
                    ]
                  ]
                ]
              ]
            ]
            [ .d-flex .align-items-center {gap:0.4rem}
              [ .d-flex .flex-column .gap-half
                <!-- # sequence task target time -->
                [ .d-flex .justify-content-end .gap-half
                  [small .icon-mate 'link' {op:0.4} {fs:0.8em} data-view-group="sequence-item" data-view-name="linked-task" title="Linked task"]
                  [small data-slot="repeatCountProgressLabel" {fs:0.7rem} .font-weight-bold .word-break-keep-all]
                  [mark data-slot="ratioTimeLeftStr" {fs:0.7rem} .word-break-keep-all .task-target-time]
                  [mark data-slot="targetCapTimeStr" {fs:0.7rem} .word-break-keep-all .task-target-cap-time]
                ]
                <!-- # sequence task progress bar -->
                [ data-view-group="sequence-item" data-view-name="track-progress"
                  [ .wg-TaskProgressBar
                    [ .label-overdrive 'Lv.0']
                    [ .inner
                      [ .progress]
                      [ .label]
                    ]
                  ]
                ]
              ]
            ]
          ]
        ]
        
        <!-- # sequence manage actions -->
        [ {p:4px 8px} .d-flex {gap:0.3rem} .align-items-center
          [ data-view-group="task" data-view-name="manage-sequence"
            [btn 'delete' data-role="delete-sequence-task" .icon-mate title="Delete"]
            [btn 'edit' data-role="edit-sequence-task" .icon-mate title="Edit"]
          ]
        ]
      ]
    ]
  </template>
  
  <template id="tmp-mission-buttons">
    <!-- # tmp-mission-buttons -->
    [ .d-inline-flex .align-items-center .gap-quarter
      [button 'expand_less' class="icon-mate" data-role="toggle-expand-sequence-task" title="Expand less sequence task" data-view-group="task" data-view-name="sequence"]
      [button 'expand_more' class="icon-mate" data-role="toggle-expand-sequence-task" title="Expand sequence task" data-view-group="task" data-view-name-not="sequence"]
      [ .d-flex 
        [btn 'playlist_add' data-role="add-to-mission" class="icon-mate" title="Add to collection"]
        [ data-view-group="task" data-view-name-not="collection-only"
          [btn 'playlist_remove' data-role="remove-mission" .bg-danger .icon-mate title="Remove from collection"]
        ]
        [ data-view-group="task" data-view-name="collection-only"
          [btn 'delete' data-role="remove-mission" .bg-danger-high .icon-mate title="Remove from collection"]
        ]
      ]
      
      [ .d-none
        <button data-role='set-active' class="icon-mate" title='Focus on this task' data-group="not-running unarchived">track_changes</button>
      ]
      <!--<button data-role='split-task' class="icon-mate" title='split'>call_split</button>-->
      <!--<button data-role='rename' class="icon-mate" title='Rename'>edit</button>-->
      [ data-view-group="task-view-mode" data-view-name-not="filter-target"
        [ .d-inline-flex .gap-quarter .align-items-center
          [ data-view-group="task" data-view-name-not="sequence-mode" .obsoletes
            <button data-role='set-target' class="icon-mate" data-group="active not-running" title='Set task duration'>timer</button>
          ]
          [ .d-none
            <button data-role='archive' class="icon-mate" data-group="not-running unarchived" title='Archive'>archive</button>
            <button data-role='unarchive' class="icon-mate" data-group="archived" title='Unarchive'>unarchive</button>
          ]
          [ .obsoletes
            <button data-role='restart' class="icon-mate" data-group="not-running" title="Reset progress">restart_alt</button>
          ]
          <button data-role='take-note' class="icon-mate d-none obsoletes" data-group="active" title="Take a note">note_add</button>
          [btn 'more_time' data-role="add-progress-minutes" class="icon-mate" data-group="active not-running" title="Add progress manually"]
          <!--[btn 'flag' data-role="set-target-time" class="icon-mate" data-group="active not-running" title="Add target time"]-->
          [ {p:0.2rem}]
          <!-- task action: edit -->
          [btn 'Edit' data-role="edit" class="icon-mate" data-group="not-running" title="Edit"]
          [ {p:0.2rem}]
          
          [btn 'open_in_new' data-role="open" class="icon-mate" title="Open"]
          [btn 'add_circle' data-role="create-mission" .icon-mate data-group="not-running" title="Edit" .obsoletes]
          <!--<button data-role='set-ratio' title='Set ratio' class="icon-mate">percent</button>-->
          <!-- <button data-role='add-label' class="icon-mate">label</button> -->
          <div style="padding-top:4px;"></div>
          [ {pr:0.3rem} data-group="not-running"]
          <!--<button data-role='delete' class="icon-mate" data-group="not-running" title='Delete'>delete</button>-->
        ]
      ]
    ]
    
    <!-- # sub task buttons -->
    [ 
      [ .d-flex {gap:0.2rem}
        <!-- # action locate task -->
        [ data-view-group="task" data-view-name-not="collection-only"
          [ .container-navigate-mission data-view-group="task-view-mode" data-view-name="mission"
            [btn data-role='navigate-mission' title='Open mission into view' .icon-mate 'open_in_new']
          ]
        ]
        [ data-view-group="task-view-mode" data-view-name="task filter-target"
          [ ._containerCreateSub .d-none .d-flex
            [btn data-role="add-sub-task" class="icon-mate" data-group="active" title="Create sub task" 'account_tree']
          ]
        ]
      ]
    ]
	  
    
  </template>
  
  <template id="tmp-mission-buttons-simple">
    <!-- # tmp-mission-buttons-simple -->
    [ .d-inline-flex {gap:0.2rem}
      <!-- # actions mission -->
      [ .d-flex .gap-half
        [
          [btn 'playlist_add' data-role="add-to-mission" class="icon-mate" title="Add to collection"]
          [ data-view-group="task" data-view-name-not="collection-only"
            [btn 'playlist_remove' data-role="remove-mission" .bg-danger .icon-mate title="Remove from collection"]
          ]
        ]
        
        <!-- # simple mode : action locate task -->
        [
          [btn data-role='navigate-mission' title='Open mission into view' .icon-mate 'open_in_new']
        ]
      ]
      
    ]
    
  </template>
  
  <template id='tmp-notes'>
    <div data-kind="note" class="i-item align-items-center">
      [s .d-none data-slot='id']
      <div class="d-none" data-slot='index'></div>

      [ .d-flex .justify-content-between
        [
          <div data-kind='note.desc' data-slot='desc'></div>
          [ {fs:.7em} {op:0.8;fw:bold}
            [s '' data-slot='progressTimeLabel'][s data-kind='progress']
          ]
        ]
        [ 
          [ {pt:.3rem}]
          [btn data-role='rename-sub-task' {p:0 4px} .icon-mate 'edit']
          [btn data-role='start-sub-task' {p:0 4px} .icon-mate 'play_arrow']
          [btn data-role='delete-note' {p:0 4px} .icon-mate 'close']
        ]
      ]
    </div>
  </template>
  <template id="tmp-dialog-alert">
    [dialog .wg-Windog
      <!-- ^# tmp-dialog-alert -->
      [ .backdrop]
      [ .wrapper
        
        [ .modal-header .justify-content-between .d-flex
          [ .flex-1 .align-items-center .d-flex
            [h2 '' .m-0 .heading]
          ]
        ]
        
        <form method="dialog" data-ref="form">
          [ data-kind="message"]
          [ .void .void-full]
          [ .text-center
            [btn 'Ok']
          ]
        </form>
      ]
    ]
  </template>
  <template id="tmp-dialog-prompt">
    [dialog .wg-Windog
      <!-- ^# tmp-dialog-alert -->
      [ .backdrop]
      [ .wrapper
        
        [ .modal-header .justify-content-between .d-flex
          [ .flex-1 .align-items-center .d-flex
            [h2 '' .m-0 .heading]
          ]
        ]
        
        <form method="dialog" data-ref="form">
          [ data-kind="message"]
          [ .void .void-half]
          
          [in type="text" data-kind="input" .input-style-default]
          [ .void .void-full]
          
          [ .d-flex .justify-content-end .gap-full
            [btn 'Ok' value="ok"]
            [btn 'Cancel']
          ]
        </form>
      ]
    ]
  </template>
  <template id="tmp-dialog-confirm">
    [dialog .wg-Windog
      <!-- ^# tmp-dialog-confirm -->
      [ .backdrop]
      [ .wrapper
      
        [ .modal-header .justify-content-between .d-flex
          [ .flex-1 .align-items-center .d-flex
            [h2 '' .m-0 .heading]
          ]
        ]
      
        <form method="dialog" data-ref="form">
          [ data-kind="message"]
          [ .void .void-full]
          [ .d-flex .justify-content-end .gap-full
            [btn 'OK' value="ok"]
            [btn 'Cancel']
          ]
        </form>
      ]
    ]
  </template>
  
  <!-- $TEMPLATES -->

  <!-- # task modal -->
  <modal-v2 id="task-modal" data-view-group="form-task" data-view-states="add">
    <div class="modal" slot="content">
      
      <!-- task modal content-->
      <div class="ov-auto pos-relative">
        
        <!-- # task modal overlay background -->
        [ .overlay-bg-default .overlay-bg-task]
        
        [ {p:1rem} .pos-relative

          [ .modal-header .justify-content-between .d-flex
            [ .flex-1 .align-items-center .d-flex
              [h2 'New Task' data-view-group="form-task" data-view-name="add" .m-0 .heading]
              [h2 'Edit Task' data-view-group="form-task" data-view-name="edit" .m-0 .heading]
            ]
            [
              [btn 'close' .icon-mate .toggler .btn-glass]
            ]
          ]
          
          
          [ .void-half]
          <!-- task modal form -->
          <form data-name='task' class='submittable default-inline-flex-gap flex-column' data-callback='submit-task' data-obj="form-task">
            
            [ data-view-group="form-task" data-view-name="edit"
              [ .text-right
                [small
                  [s 'ID : '][s data-id="readOnlyId"]
                ]
              ]
            ]
            
            <input type="hidden" name="id"/>
            <input type="hidden" name="taskType"/>
            
            [ .d-grid {gap:0.5rem} .form-card-inner
              
              [
                Title 
                [ .void-quarter]
                <input type="text" name='title' class="input-style-default"/>
              ]
              [ .d-flex .justify-content-between .gap-full
                [ .d-flex .flex-column
                  Target Time
                  [ .void-quarter]
                  <input type="text" name='targetCapTime' class="input-style-default" placeholder="Example: 1h, 30m, 4m, ..."/>
                ]
              ]
              [ .d-flex
                [ .d-flex .flex-column
                  [ .d-flex .align-items-center .gap-quarter
                    [i .icon-mate 'timer']
                    Timer [small '(change in settings)' .opacity-half]
                  ]
                  [ .void-quarter]
                  [in type="text" name='durationTime' placeholder='example: 1h, 30m, or 1h30m' .input-style-default]
                ]
              ]
              [ .d-none
                Repeat count (leave blank for none) 
                [ .void-quarter]
                <input type="number" min="1" name='finishCount' class="input-style-default"/>
              ]
              [ data-view-group="form-task" data-view-name="edit" data-view-name-not="collection-only"
                Parent ID <input type="text" name='parent-id' class="input-style-default"/>
              ]
              
            ]
            [ .mb-m]
            
            [ .form-card-inner data-view-group="form-task" data-view-name="edit"
              [ .d-flex .flex-column
                [
                  Target by ROP [small '(auto-assigned)' .opacity-half]
                ]
                [ .void-quarter]
                [ .d-flex .gap-half
                  [in type="text" name='targetTime' .input-style-default .flex-1]
                ]
              ]
            ]
            [ .mb-m]
            
            [ .void-half]
            
            <!-- # modal notes -->
            [ data-view-group="form-task" data-view-name="edit" 
              [ data-view-group="form-task" data-view-name="collection-only" 
                [small {fs:0.75rem}
                  Note : You're editing/creating a collection-only task. To create a public task, go to <b>My Tasks</b> then create a new task.
                ]
                [ .void-half]
                [ .void-half]
              ]
            ]
            
            <!-- # task modal : form actions -->
            [ 
              [ data-view-group="form-task" data-view-name="add"
                [ .d-flex .justify-content-end
                  [ 
                    [btn 'Cancel' .toggler type="button"]
                    [btn 'Add' data-role="btn-add" .btn-primary]
                  ]
                ]
              ]
              [ data-view-group="form-task" data-view-name="edit" 
                
                [ .d-grid {gap:0.5rem}
                
                  [ .d-flex .justify-content-between
                    [ 
                      [ .d-flex .align-items-center {gap:0.5rem}
                        [btn 'delete' .icon-mate title="Delete" type="button" data-onclick="delete-task-from-form"]
                      ]
                    ]
                    [ 
                      [btn 'Cancel' .toggler type="button"]
                      [btn 'Update' data-role="btn-edit" .btn-primary]
                    ]
                  ]
                  [ .void-half]
                  
                  <!-- # task modal progress actions -->
                  [ .d-flex .align-items-center .gap-half .flex-wrap
                  
                    [btn 'Reset progress' type="button" data-onclick="reset-progress-task-from-form"]
                    [ data-view-group="build" data-view-name="dev" .obsoletes
                      [btn 'Distribute progress' type="button" data-onclick="distribute-progress-task-from-form"]
                    ]
                    [ data-view-group="build" data-view-name="dev"
                      [btn type="button" class="d-flex align-items-center" style="gap:0.3rem;" data-onclick="add-progress-from-form"
                        [s .icon-mate 'more_time']
                        [s 'Add progress manually']
                      ]
                    ]
                    
                  ]
                
                ]
                
              ]
            ]
            
          </form>

        ]
        
      </div>
    </div>
  </modal-v2>
  
  <!-- # sequence task modal  -->
  <modal-v2 id="task-sequence-modal" data-view-group="form-task-sequence" data-view-states="add">
    <div class="modal" slot="content">
      
      <!-- modal content-->
      <div class="ov-auto pos-relative">
        
        <!-- # overlay background -->
        [ .overlay-bg-default .overlay-bg-sequence-task]
        
        <div style="padding:1rem;" class="pos-relative">

          [ .modal-header .justify-content-between .d-flex
            [ .flex-1 .align-items-center .d-flex
              [h2 'Add Sequence Task' data-view-group="form-task-sequence" data-view-name="add" .m-0 .heading]
              [h2 'Edit Sequence Task' data-view-group="form-task-sequence" data-view-name="edit" .m-0 .heading]
            ]
            [
              [btn 'close' .icon-mate .toggler .btn-glass]
            ]
          ]
          [ .void-half]
          
          <!-- # form sequence task -->
          <form data-name="task" class="submittable default-inline-flex-gap flex-column" data-callback="submit-sequence-task" data-obj="form-task">
            
            <input type="hidden" name="id"/>
            <input type="hidden" name="taskId"/>
            
            [ .d-grid {gap:0.5rem} .form-card-inner
            
              [
                Title 
                [ .void-quarter]
                <input type="text" name="title" class="input-style-default"/>
              ]
              <!-- sequence target cap time -->
              [
                Target Time
                [ .void-quarter]
                <input type="text" name="targetCapTime" placeholder="e.g. 7m, 15m20s, 1h20m" class="input-style-default"/>
              ]
              <!-- sequence timer duration  -->
              [
                [ .d-flex .align-items-center .gap-quarter
                  [i .icon-mate 'timer']
                  Timer 
                ]
                [ .void-quarter]
                <input type="text" name="duration" placeholder="e.g. 7m, 15m20s, 1h20m" class="input-style-default"/>
              ]
              [hr]
              
              <!-- repeat options -->
              [
                [l .user-select-none
                  [in type="checkbox" name="useRepeat"] 
                  Repeat this task
                ]
              ]
              [
                Repeat count 
                [ .void-quarter]
                <input type="number" name="repeatCount" min="2" value="2" class="input-style-default"/>
              ]
              [ data-view-group="build" data-view-name="dev" .obsoletes
                Repeat rest duration <input type="text" name="repeatRestDurationTimeStr" placeholder="e.g. 30s, 3m, 15m20s" class="input-style-default"/>
              ]
              
            ][ .mb-m]
            
            <!-- # form sequence task : submit -->
            [ data-view-group="form-task-sequence" data-view-name="add"
              [ .text-right
                [btn 'Cancel' .toggler type="button"]
                [btn 'Add' data-role="btn-add" .btn-primary]
              ]
            ]
            
            [ .void-half]
            
            <!-- # sequence task modal : form action -->
            [ data-view-group="form-task-sequence" data-view-name="edit"

              [ .d-grid {gap:0.5rem}
                
                [ .d-flex .justify-content-between
                  [ .d-flex .align-items-center {gap:0.5rem}
                    [btn 'delete' .icon-mate type="button" data-onclick="delete-sequence-from-form"]
                  ]
                  <!-- # sequence task modal : submitter -->
                  [
                    [btn 'Cancel' .toggler type="button"]
                    [btn 'Update' data-role="btn-edit" .btn-primary]
                  ]
                ]
                
                [ .d-flex .flex-column {gap:0.5rem} .form-footer-card .padding-container
                
                  [ .d-flex .justify-content-between
                    [btn 'Reset progress' type="button" data-onclick="reset-progress-sequence-from-form"]
                  ]
                  <!-- open linked sequence -->
                  [ data-view-group="build" data-view-name="dev"
                    [ data-view-group="form-task-sequence" data-view-name="linked-task"
                      [ .d-flex {gap:0.5rem}
                        [btn 'open_in_new' .icon-mate type="button" data-onclick="open-linked-sequence-from-form"]
                        [btn type="button" class="d-flex align-items-center" style="gap:0.3rem;" data-onclick="open-linked-sequence-priority-mapper"
                          [s 'Open in Priority mapper'] [s .icon-mate 'linear_scale']
                        ]
                      ]
                    ]
                    [ .void-half]
                  ]
                
                ]
                
              ]
              
            ]
            
          </form>

        </div>
      </div>
    </div>
  </modal-v2>
  
  <!-- # mission from task modal  -->
  <modal-v2 id="modal-mission-from-task">
    <div class="modal" slot="content">
      
      <!-- modal content-->
      <div class="ov-auto pos-relative">
        
        <!-- # overlay background -->
        [ .overlay-bg-default .overlay-bg-sequence-task]
        
        <div style="padding:1rem;" class="pos-relative">

          [ .modal-header .justify-content-between .d-flex
            [ .flex-1 .align-items-center .d-flex
              [h2 'Create Mission from Task' .m-0 .heading]
            ]
            [
              [btn 'close' .icon-mate .toggler .btn-glass]
            ]
          ]
          [ .void-half]
          
          <!-- # form sequence task -->
          <form data-name="task" class="default-inline-flex-gap flex-column" data-onsubmit="submit-mission-convert-task" data-obj="form-task">
            
            <input type="hidden" name="id"/>
            
            [ .d-grid {gap:0.5rem} .form-card-inner
            
              [
                [l .user-select-none
                  [in type="checkbox" name="createSequence"] 
                  Add sub tasks as sequence.
                ]
              ]
              
            ]
            [ .void-half]
            
            <!-- # form sequence task : submit -->
            [ .text-right
              [btn 'Cancel' .toggler type="button"]
              [btn 'Create' data-role="btn-add" .btn-primary]
            ]
            
            [ .void-half]
            
          </form>

        </div>
      </div>
    </div>
  </modal-v2>
  
  <style>
    .popup {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 1;
      justify-content: center;
      align-items: center;
  }
  
  .popup-content {
      background-color: white;
      padding: 20px;
      border-radius: 5px;
      text-align: center;
  }
  </style>
  
  <!-- # modal mission target -->
  <modal-v2 id="modal-prompt">
    <div class="modal" slot="content">
      <!-- # modal content-->
      <div class="ov-auto">
        <div style="padding:1rem;">
          
          sample 


        </div>
      </div>
    </div>
  </modal-v2>

  <!-- # modal note -->
  <modal-v2 id="modal-note" class="is-modal">
    <div class="modal" slot="content">
      <!-- modal content-->
      <div class="ov-auto">
        <div style="padding:1rem;">

          New Note :
          [ .void-half]
          <form class='submittable default-inline-flex-gap flex-column' data-callback='add-note'>
            <input type="hidden" name="id"/>
            <div>
              <input type="text" name='title' class="input-style-default"/>
            </div>
            <div>
              <button data-role='btn-add'>Add</button>
            </div>
          </form>

        </div>
      </div>
    </div>
  </modal-v2>
  
  <!-- # basic custom confirmation dialogue -->
  <div id="confirmationPopup" class="popup">
      <div class="popup-content">
          <p>Are you sure you want to proceed?</p>
          <button id="confirmYes">Yes</button>
          <button id="confirmNo">No</button>
      </div>
  </div>
  
  
  
  <script src="js/lib/sweetalert2@11.js"></script>
  
  <!-- # webcomponents -->
  <!-- ## modal-v2 -->
  <script src="modal-v2-utils.js"></script>

  <script src="service.js"></script>
  <script src="service-chrome.js"></script>
  <script src="js/lib/mousetrap.min.js"></script>
  <script src="js/lib/statelist@v1.0.2.min.js"></script>
  <script src="js/lib/templateslot.min.js"></script>
  
  <script src="js/component-loader.js"></script>
  <script src="index.js" type="module"></script>
  
  <script src="pwa-cacher.js"></script>

</body>
</html>