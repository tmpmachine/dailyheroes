<!DOCTYPE html>
<html class="h-100">
<head>

  <title>DailyHeroes</title>
  <!-- mobile meta tags-->
  <meta name="viewport" content="width=device-width"/>
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">

  <!-- pwa manifest -->
  <link rel="manifest" href="manifest.json"/>
  
  <link href="css/theme.css" rel="stylesheet"/>
  <link href="css/style.css" rel="stylesheet"/>
  <link href="css/app.css" rel="stylesheet"/>
  
  <!--<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />-->
  <style>
  
    /* fallback */
    @font-face {
      font-family: 'Material Symbols Outlined';
      font-style: normal;
      font-weight: 400;
      src: url(https://fonts.gstatic.com/s/materialsymbolsoutlined/v153/kJF1BvYX7BgnkSrUwT8OhrdQw4oELdPIeeII9v6oDMzByHX9rA6RzaxHMPdY43zj-jCxv3fzvRNU22ZXGJpEpjC_1v-p_4MrImHCIJIZrDCvHOej.woff2) format('woff2');
      /*src: url(fonts/MaterialSymbolsRounded[FILL,GRAD,opsz,wght].woff2) format('woff2');*/
    }
  
  </style>
  
  <!-- # webcomponents -->
  <!-- ## modal-v2 -->
  <link href="css/modal-v2.css" rel="stylesheet"/>
  <script src="js/web-components/modal-v2.js"></script>
  
</head>
<body data-view-group="platform auth build" data-view-states="" class="h-100 ov-hidden">
  
  <div class="container-app ov-auto h-100" style="max-width:500px;margin:auto;">

    <div class="d-grid h-100 container-app-inner" data-view-group="screens features" data-view-states="home" style="max-width:100%;min-width:360px;margin:auto;">
    
      <!-- # screen : home -->
      <section class="container-screen pos-relative container-screen-home" data-view-group="screens" data-view-name="home">
        
        <!-- # navigations-->
        <div class="d-flex justify-content-between main-nav-bar z-index-1 top-0 pos-sticky">
          <div>
            <div data-view-group="platform" data-view-name="web">
              <button class="clickable d-flex align-items-center" data-callback="turn-off-screen" style="gap:0.3rem;">
                Fake screen off <span class="icon-mate">bolt</span>
              </button>
            </div>
          </div>
          <div class="d-flex" style="gap:0.3rem;">
          
            <!-- # nav : tasks by threshold -->
            <button class="d-flex align-items-center" data-onclick="open-by-threshold" style="gap:0.3rem;">
              <span>Targets</span> <span class="icon-mate">flag</span>
            </button>
          
            <!-- # tracker timer -->
            <button class="clickable d-flex align-items-center btn-border-0" data-callback="navigate-screen" data-view-target="trackers" style="gap:0.3rem;">
              Trackers <span class="icon-mate">timer</span>
            </button>
            <div class="separator-vertical"></div>
            <button class="clickable icon-mate btn-border-0" data-callback="navigate-screen" data-view-target="settings">settings</button>
          </div>
        </div>

        
        <!-- # home screen body -->
      
        <div class="padding-container">
        
          <div class="pb-half"></div>
          <div class="pb-half"></div>
          
          <!-- # active task container -->
          <div class="d-flex container-active-task bg-white" style="gap:0.5rem;">
            
            <!-- # progress bar -->
            <div data-view-group="active-task-info" data-view-states="" style="flex-grow:1;">
              <div class="NzE2ODYyNQ-progress-bar-container">
                <div class="NzE2ODYyNQ-progress-bar">
                  <div class="NzE2ODYyNQ-progress-bar-fill"></div>
                  <span class="NzE2ODYyNQ-progress-bar-text"><span id="txt-countdown">00:00:00</span></span>
                </div>
              </div>
              <div class="mb-m"></div>
              
              <!-- # active task info -->
              <div>
                <small>Active task</small> : <span id="txt-active-task-name" style="font-weight:bold;word-break:break-word;"></span> 
              </div>
              <!-- # active task sequence info -->
              <div data-view-group="active-task-info" data-view-name="is-sequence">
                <small>Sequence task</small> : <span id="txt-active-task-sequence-name" style="font-weight:bold;word-break:break-word;"></span> 
              </div>
              <!-- # active time total time streak -->
              <div data-view-group="active-task-info" data-view-name="on-streak">
                <small>
                  Total time streak : <span id="txt-time-streak"></span>
                </small>
              </div>
              
              <!-- # active time target time -->
              <small data-view-group="active-task-info" data-view-name="has-target">
                Target : <mark id="txt-active-task-target"></mark> <span id="txt-active-task-target-limit"></span>
              </small>
              <div class="pb-half"></div>
              
              <!-- # open task button -->
              <div class="d-flex justify-content-between">
                <button class="bg-white" data-onclick="open-task-into-view">
                  <small class="icon-mate">open_in_new</small>
                </button>
                
                <!-- # pip button-->
                <button class="bg-white" data-onclick="open-pip" data-view-group="platform" data-view-name="web">
                  <small class="icon-mate">picture_in_picture</small>
                </button>
              </div>
              
            </div>
            
            
            <!-- # toggle active task timer -->
            <div class="d-flex flex-column" style="gap:0.5rem;">
            
              <div data-obj="stop-timer">
                <div class="d-grid" style="gap:0.35rem;height:2.2rem;min-width:100px;">
                  <button class='clickable btn-timer-control-stop d-flex align-items-center justify-content-center' style="gap:0.3rem" data-callback='stop-timer'>
                    Stop 
                    <span class="icon-mate">stop</span>
                  </button>
                  <button class='clickable btn-timer-start btn-timer-control-start d-flex align-items-center justify-content-center' style="gap:0.3rem" data-callback='start-or-restart-timer'>
                    Start
                    <span class="icon-mate">play_arrow</span>
                  </button>
                  <small class="text-center" data-view-group="platform" data-view-name="web">(Alt+S)</small>
                  <button class='clickable d-none' data-callback='finish-timer'>Finish (F)</button>
                </div>
              </div>
              
            </div>
          
          </div>
          
          <div class="mb-xs"></div>
          
          
          <div class="d-none">
            <div style="height:2px;"></div>
            <div class="progress-bar-container">
              <div class="progress-bar">
                <div class="progress-bar-fill"></div>
                <span class="progress-bar-text"><span id="percentage"></span></span>
              </div>
            </div>
          </div>
          
          <div class="void-half"></div>
          
        </div>
        <div class="void-full"></div>
        
        <!-- # interactive sequence task pick -->
        <div class="padding-container" data-view-group="features" data-view-name="interactive-sequence-task-pick">
          <div style="background:#bfdfff;border-radius:4px;padding:0.5rem;">
            <div style="font-size:0.7rem;">
              <span style="font-weight:bold;">Sequence Task Linking</span> <mark style="padding:2px 4px;border-radius:4px;">beta</mark>
            </div>
            <div class="pb-half"></div>
            <div class="d-flex" style="gap:0.5rem;">
              <small class="flex-1">
                Instruction : Browse and pick tasks to add as sequence, then click <b>Finish</b>.
              </small>
              <button class="btn" data-onclick="finish-interactive-sequence-pick">Finish</button>
            </div>
          </div>
          <div class="pb-half"></div>
          <div class="pb-half"></div>
        </div>
        
        <!-- # search -->
        <div class="padding-container">
          <input id="node-filter-box" type="text" placeholder="Search" class="inputable input-style-default" data-callback="save-word-template"/>
          <div class="d-none">
            Filter by label :
            <input id="in-filter-search-label" class="inputable input-style-default" data-callback="save-label-filter"/>
          </div>
          <div class="pb-half"></div>
        </div>
        <div class="pb-half"></div>
        
        <!-- # container task view mode-->
        <section data-view-group="task-view-mode" data-view-states="task" class="container-task-view">
          
          <!-- # view mode tabs -->
          <div class="d-grid container-view-mode" style="grid-template-columns:1fr 1fr auto;">
            <button class="clickable" data-callback="view-mission" data-id="mission">
              <div class="d-flex align-items-center justify-content-center" style="gap:0.5rem;">
                <span class="icon-mate">list</span>
                <span>Missions</span>
              </div>
              <div class="tab-active-indicator"></div>
            </button>
            <button class="clickable" data-callback="view-tasks" data-id="task">
              <div class="d-flex align-items-center justify-content-center" style="gap:0.5rem;">
                My Tasks
              </div>
              <div class="tab-active-indicator"></div>
            </button>
          </div>
          <div class="pb-half"></div>
          
        <div class="padding-container">
        
          <div class="pb-half"></div>
        
          <!-- # mission collection -->
          <div data-view-group="task-view-mode" data-view-name="mission">
            <div class="d-grid align-items-center" style="gap:0.3rem;grid-template-columns:1fr auto;">
              
              <div class="ov-auto">
                <span class="txt">Collection</span> <select id="in-sel-mission-group" class="changeable" data-callback='on-mission-group-change'></select>
                <div class="mb-xs"></div>
              </div>
              
              <!-- # collection actions -->
              <div class="d-flex" style="gap:0.3rem;">
                <button class="icon-mate btn-glass" data-onclick="new-collection">add</button>
                <button class="clickable btn-glass" data-callback="navigate-screen" data-view-target="collections">Manage</button>
              </div>
              
            </div><div class="mb-m"></div>
          </div>
          
          <!-- # filter by target time -->
          <div class="obsoletes" data-view-group="task-view-mode" data-view-name="task">
            <div class="d-flex align-items-center user-select-none">
              <input class="inputable" type='checkbox' id='labeled-by-showtarget' data-callback="toggle-show-target-only"/> 
              <label class="d-flex align-items-center" for='labeled-by-showtarget'>
                <small class="txt">Show only task with target time (>= 10m)</small>
              </label>
            </div>
            <div class="pb-half"></div>
          </div>
          
          <div data-view-group="task-view-mode" data-view-name="task filter-target">
            
            <div class="justify-content-end d-flex gap-half" data-view-group="task-view-mode" data-view-name-not="filter-target">
              
              <!-- # nav : priority mapper -->
              <button class="d-flex align-items-center btn-glass" data-onclick="open-priority-mapper" style="gap:0.3rem;">
                <span>Priority Mapper</span> <span class="icon-mate">linear_scale</span>
              </button>
              
            </div>
            <div class="pb-half"></div>
            
            <!-- # breadcrumbs -->
            <div class="d-flex justify-content-between">
              <div id="container-breadcrumbs" class="container-breadcrumbs" data-onclick="handle-click-breadcrumbs"></div>
            </div>
            <div style="margin-bottom:0.3rem;"></div>
            
          </div>
          <div class="pb-half"></div>
  
          <!-- # total mission targets -->
          <small style="color:white;">
            Total targets : <mark id="txt-total-target"></mark> (exclude linked tasks)
          </small>
          <div class="pb-full"></div>
          
          
          <!-- # task list container -->
          <div id="tasklist-container" class="container-task">
            <div id="tasklist" class="clickable" data-callback="task-click-handler"></div>
            <div style="padding-top:1rem;"></div>
            <div id="tasklist-completed" class="clickable" data-callback="task-click-handler"></div>
          </div>
          
          <!-- # sort task option -->
          <div>
            <div class="d-flex align-items-center user-select-none">
              <input class="inputable" type='checkbox' id='labeled-by-sortbyprogress' data-callback="toggle-sort-by-progress"/> 
              <label class="d-flex align-items-center" for='labeled-by-sortbyprogress'>
                <small class="txt">Ascending sort by total progress time</small>
              </label>
            </div>
            <div style="margin-bottom:0.5rem;"></div>
          </div>
        
          
          <!-- # floating controls -->
          <div class="container-add-task">
            
            <div class="pos-relative" style="max-width:500px;margin:auto;">
              
              <!-- # overlay tracker -->
              <div class="tracker-overlay d-grid" data-view-group="features" data-view-name="tracker-overlay">
                <div class="d-grid" style="gap:0.25rem;">
                  <div class="d-flex justify-content-between" style="gap:0.3rem;">
                    <small>Active tracker</small>
                    <div>
                      <button class="icon-mate clickable" data-callback="stop-tracker" style="font-size: 0.7rem;padding: 2px 6px;">close</button>
                    </div>
                  </div>
                  <div class="d-inline-flex" style="gap:0.3rem;">
                    <div class="word-break-all" data-slot="title"></div>
                    <div data-slot="progressTimeStr"></div>
                  </div>
                </div>
              </div>
              
              <!-- # floating buttons -->
              <div>
                <button class="clickable btn-add-task bg-white" data-callback="show-modal-add-task">
                  <span class="icon-mate" style="font-size:2.2rem;">add</span>
                  <div class="pos-absolute" style="bottom:6px;">
                    <small class="text-center" data-view-group="platform" data-view-name="web" style="font-size:0.5rem;">(Alt+N)</small>
                  </div>
                </button>
              </div>
            
            </div>
            
          </div>
        
        </div>
        
        <!-- # add task -->
        <!-- empty gap for floating button -->
        <div style="height:76px;"></div> 
        
        </section>
        
        
      </section>
      
      <!-- # collections screen -->
      <section class="container-screen" data-view-group="screens" data-view-name="collections">
      <div class="d-grid h-100 pos-relative" style="grid-template-rows:auto 1fr;">
      
        <!-- # overlay background -->
        <div class="overlay-bg-default overlay-bg-collections"></div>
        
        <!-- # collection screen nav -->
        <div class="d-flex align-items-center container-screen-title pos-sticky top-0 z-index-1" style="gap:1rem;">
          <button class="clickable icon-mate btn-nav" data-callback="navigate-screen" data-view-target="home">chevron_left</button>
          <div style="font-weight:bold;">Collections</div>
        </div>
        
        <!-- # collection screen body -->
        <div class="padding-container pos-relative">
        
          <div class="pb-half"></div>
          <div class="pb-half"></div>
          
          <button data-onclick='new-collection'>New collection</button>
          
          <div class="pb-half"></div>
          <div class="pb-half"></div>
          
          <!-- ### list collection -->
          <div data-container="list-collection" data-onclick="handle-click-list-collection"></div>
          
        </div>
      
      </div>
      </section>
        
      
      <!-- # trackers screen -->
      <section class="container-screen" data-view-group="screens" data-view-name="trackers">
        
        <div class="d-flex align-items-center container-screen-title" style="gap:1rem;">
          <button class="clickable icon-mate btn-nav" data-callback="navigate-screen" data-view-target="home">chevron_left</button>
          <div style="font-weight:bold;">Trackers</div>
        </div>

        <!-- # screen body -->
        <div class="padding-container bg-white">
        
          <div class="pb-half"></div>
          <div class="pb-half"></div>
          
          <button class="clickable" data-callback='new-tracker'>New tracker</button>
          
          <!-- # container trackers -->
          <div id="container-list-tracker" class="clickable" data-callback="handle-click-list-tracker"></div>
          
        </div>
        
      </section>
      
      <!-- # tasks by threshold screen -->
      <section class="container-screen h-100 pos-relative" data-view-group="screens" data-view-name="by-threshold">
      <div class="d-grid h-100" style="grid-template-rows:auto 1fr;">
      
        <!-- # Tasks By Threshold screen nav -->
        <div class="d-flex align-items-center container-screen-title pos-sticky top-0 z-index-1" style="gap:1rem;">
          <button class="clickable icon-mate btn-nav" data-callback="navigate-screen" data-view-target="home">chevron_left</button>
          <div style="font-weight:bold;">Targets</div>
        </div>
      
        <!-- # Tasks By Threshold screen body -->
        <div class="padding-container pos-relative">
          <div class="pb-full"></div>
          
          <small>
            Info : only targets above 5m are shown in the list.
          </small>
          <div class="pb-full"></div>
          
          <div id="list-tasks-by-threshold" data-onclick="task-click-handler"></div>
        </div>
        
      </div>
      </section>
      
      <!-- # priority mapper screen -->
      <section class="container-screen h-100 pos-relative" data-view-group="screens" data-view-name="priority-mapper">
      <div class="d-grid h-100" style="grid-template-rows:auto 1fr;">
      
        <!-- # overlay background -->
        <div class="overlay-bg-default overlay-bg-priority-mapper"></div>
        
        <!-- # priority mapper screen nav -->
        <div class="d-flex align-items-center container-screen-title pos-sticky top-0 z-index-1" style="gap:1rem;">
          <button class="clickable icon-mate btn-nav" data-callback="navigate-screen" data-view-target="home">chevron_left</button>
          <div style="font-weight:bold;">Priority Mapper</div>
        </div>
        
        <!-- # priority mapper screen body -->
        <div class="padding-container pos-relative">
        
          <div class="pb-half"></div>
          <div class="pb-half"></div>
          
          <div class="pos-relative">
            <div class="d-flex justify-content-end">
              <button class="clickable" data-callback='save-priority-mapper'>Save</button>
            </div>
            <div class="pb-half"></div>
            
            <small>Guide : Adjust the slider for each task to determine its priority relative to the other tasks.</small>
            <div class="pb-half"></div>
            <div class="pb-half"></div>
            
            <!-- # priority mapper items container -->
            <div class="d-flex justify-content-end">
              <small style="font-weight:bold;">ROP (Ratio Of Priority)</small>
            </div>
            <div style="border-bottom:1px solid grey;margin:4px 0;opacity:0.2;"></div>
            <div class="inputable" data-container="list-priority-mapper" data-callback="handle-input-priority-slider"></div>
          </div>
          
        </div>
      
      </div>
      </section>
      
      <!-- # settings screen -->
      <section class="container-screen h-100 pos-relative" data-view-group="screens" data-view-name="settings">
      <div class="d-grid h-100 pos-relative" style="grid-template-rows:auto 1fr;">
        
        <!-- # settings nav header -->
        <div class="d-flex align-items-center container-screen-title pos-sticky top-0 z-index-1" style="gap:1rem;">
          <button class="clickable icon-mate btn-nav" data-callback="navigate-screen" data-view-target="home">chevron_left</button>
          <div style="font-weight:bold;">Settings</div>
        </div>
        
        <!-- # settings screen body -->
        <div class="padding-container pos-relative">
        
          <div class="pb-half"></div>
          <div class="pb-half"></div>
          
          <div class="d-grid" style="gap:0.3rem;">
            
            <!-- application data -->
            <div>
              <div class="settings-group-title">Application Data</div>
              <div class="mb-m"></div>
              <div class="settings-card-inner">
                <div>
                  <button data-onclick="reset-data">Reset data</button>
                  <button data-onclick="reset-target-time">Reset tasks progress and target</button>
                </div>
              </div>
              
            </div><div class="pb-half"></div> 
            
            <!-- backup and restore -->
            <div>
              <div class="settings-group-title">Backup and Restore</div>
              <div class="mb-m"></div>
              
              <div class="settings-card-inner">
                <small>Backup to Google Drive.</small><div class="mb-m"></div>
                <div class="d-flex" style="gap:0.3rem;">
                  <button class="clickable" data-callback="authorize">Authorize</button>
                  <div data-view-group="auth" data-view-name="authorized">
                    <button id="btn-cloud-backup" class="clickable" data-callback="backup-to-cloud">Backup</button>
                    <button id="btn-cloud-restore" class="clickable" data-callback="restore-from-cloud">Restore</button>
                  </div>
                </div>
                <div>
                  <div id="txt-backup-status"></div>
                  <div id="txt-restore-status"></div>
                </div><div class="mb-m"></div>
                
                <!-- # local backup -->
                <small>Local backup and restore.</small><div class="mb-m"></div>
                <div class="d-flex" style="gap:0.3rem;">
                  <button class="clickable" data-callback="backup-data">Download</button>
                  <button class="clickable" data-callback="restore-data">Upload</button>
                </div>
              </div>
              
            </div><div class="pb-half"></div> 
            
            <!-- global preset timer -->
            <div>
              <div class="settings-group-title">Timer Preset</div>
              <div class="mb-m"></div>
              <div class="settings-card-inner">
                
                <small>Default task duration (Lowest allowed is 1 minute).</small>
                <div class="pb-full"></div>
                
                <div class="d-flex justify-content-between">
                  <div>
                    Task duration : 
                    <span id="txt-global-preset-timer" class="font-weight-bold"></span> 
                  </div>
                  <button class="clickable" data-callback='change-global-preset-timer'>Change</button>
                </div>
                <div class="pb-half"></div>
                
              </div>
              
            </div><div class="pb-half"></div> 
            
            <!-- sound -->
            <div>
              <div class="settings-group-title">Alarm Sound</div>
              <div class="mb-m"></div>
              <div class="settings-card-inner">
                
                <div class="d-flex flex-wrap gap-half">
                  <button class="clickable" data-callback="pick-audio">Set audio</button>
                  <button class="clickable" data-callback="remove-audio">Remove audio</button>
                  <button class="clickable" data-callback="test-audio">Test audio</button>
                  <button class="clickable" data-callback="stop-test-audio">Stop test</button>
                </div>
                <div class="pb-half"></div>
                
                <div class="d-flex align-items-center gap-half">
                  Volume : <input data-jsq="alarm-volume" type="range" min="0.2" max="1" step="0.1" value="1" data-oninput="handle-input-alarm-volume"/>
                </div>
                
              </div>
            </div><div class="pb-half"></div>
            
            <!-- web app installation -->
            <div class="d-grid" data-view-group="platform" data-view-name="web" style="gap:0.3rem;">
              <div>
                <div class="settings-group-title">Web App</div>
                <div class="mb-m"></div>
                <div class="settings-card-inner">
                  <button id="buttonInstall">Install</button><div class="pb-half"></div>
                </div>
              </div>
            </div><div class="pb-half"></div>
            
            <!-- app cache -->
            <div data-view-group="platform" data-view-name="web">
              <div class="settings-group-title">Updates & Offline Access</div>
              <div class="pb-half"></div>
              
              <div class="settings-card-inner">
              
                <div class="d-grid" style="gap:0.3rem;">
                  <div>
                    <button onclick="pwaCacher.update()">Check for updates</button>
                  </div>
                  <div>
                    <button onclick="pwaCacher.removeUpdate()">Remove app cache *</button>
                  </div>
                </div>
                <div class="pb-half"></div>
                <small>*) Removing app cache will disable offline access until you update the app manually by clicking on <b>Check for updates</b> button.</small>
              
              </div>
            </div>
          </div>
          
          <div class="pb-half"></div>
        
        </div>
        
      </div>
      </section>
      
    
    </div>

  </div>
  
  <section class="container-screen-off">
    <!---->
  </section>
  
  
  <style>
    #update-notif {
      display: none;
    }
    #update-notif.active {
      display: block;
    }
  </style>
  <div id="update-notif" style="position:fixed;bottom:0;left:0;width:100%;background:#0b0b0e;color:#ccc;z-index:8177;font-weight:bold">
    <div class="d-grid" style="grid-template-columns:1fr auto;">
      <div style="padding:16px;">New version available</div>
      <div style="display:grid;grid-template-columns:1fr 1fr;">
        <div id="btn-refresh" style="padding:16px;text-transform:uppercase;font-weight:bold;color:#d8d782;">Refresh</div>
        <div id="btn-dismiss" style="padding:16px;text-transform:uppercase;font-weight:bold;">Dismiss</div>
      </div>
    </div>
  </div>
  
  
  <!-- # TEMPLATES -->
  
  <template id="tmp-pip-doc">
    <!-- # tmp-pip-doc -->
    <file src="html/pip-doc.html"></file>
  </template>
  
  <template id="tmp-list-tracker">
    <!-- # container tracker -->
    <div data-kind="item" data-id="">
      <div data-slot="title"></div>
      <div>
        <small data-slot="progressTimeStr"></small>
      </div>
      <div class="d-flex justify-content-end" style="gap:0.3em;">
        <button data-action="rename">Rename</button>
        <button data-action="delete">Delete</button>
        <button data-action="set">Set</button>
      </div>
    </div>
  </template>
  
  <template id="tmp-list-collection">
    <!-- # tmp-list-collection -->
    <div class="d-flex" data-kind="item" data-id="" style="border-bottom:1px solid lightgrey;gap:0.7rem;padding:0.5rem;">
      <div class="flex-1" data-slot="title"></div>
      <div class="d-flex justify-content-end" style="gap:0.3em;">
        <button data-action="rename">Rename</button>
        <button data-action="delete">Delete</button>
      </div>
    </div>
  </template>
  
  <template id="tmp-list-priority-item">
    <!-- # tmp-list-priority-item -->
    <div class="item" data-kind="item" data-id="">
      <div>
        <div class="d-flex justify-content-between">
          <span data-slot="title"></span>
          <small data-slot="ropStr"></small>
        </div>
        <div>
          <small data-slot="progressTimeStr"></small>
        </div>
      </div>
      <div class="d-grid">
        <input class="in-priority-slider" type="range" min="0" max="100" value="0"/>
      </div>
    </div>
  </template>
  
    
  <template id="tmp-task">
    <!-- # container task -->
    
  	<div class="container-item pos-relative" data-obj="task" data-id="?" data-kind="task" data-view-group="task" data-view-states="">
  	  
  	  <div class="d-none">
  	    <!-- # add to mission button -->
        <div data-view-group="task-view-mode" data-view-name="task">
          <div class="pos-absolute container-task-mission-actions">
            <button class="btn-toggle-mission icon-mate" data-role="add-to-mission" title="Add to mission">
              playlist_add
            </button>
            <button class="btn-toggle-mission icon-mate" data-role="remove-mission" title="Remove from mission">
              playlist_remove
            </button>
          </div>
        </div>
      </div>
  
  	  
  	  <!-- # task body -->
  	  <div class="task-body-main" style="padding:0.3rem 0.5rem;display:grid;grid-template-columns:1fr auto;gap:1rem;">
  	  
  	    <!-- # task top info -->
  	    <div>
  	    
  	      <!-- # task info (title) -->
      	  <div class="d-flex justify-content-between" style="gap:0.3rem;">
      	    <div class="flex-1">
        	    <div data-slot="missionPath" data-slot-html></div>
        	    <span class="title" data-slot="title"></span>
      	    </div>
      	    <div class="obsoletes">
        	    <div class="d-none">
        	      <span data-slot="label"></span>
        	    </div>
              <div style="font-size:0.7rem;">
                <span data-slot="rankLabel"></span>
                <span class="label-finish-count"></span>
              </div>
      	    </div>
      	  </div>
      	  
      	  <div class="mb-m"></div>
      	  
      	  <!-- # time progress info -->
      	  <div class="d-flex justify-content-between" style="font-size:0.7rem;">
            <div style="flex:1;">
              <span data-view-group="task" data-view-name-not="sequence-mode">
            	  <span data-obj="progress" data-slot="progress"></span>
            	  <span data-obj="live-progress"></span> / <small data-slot="allocatedTimeString"></small>
              </span>
          	  <span data-slot="totalProgressStr"></span>
          	  <span data-view-group="task" data-view-name-not="sequence-mode">
            	  --
        	      <span data-slot="targetString"></span> 
          	  </span>
      	      <span class="d-none" data-slot="completionPercentage"></span>
        	  </div>
        	  <div class="d-flex flex-column">
              <span data-slot="ratio" data-view-group="task-view-mode" data-view-name-not="filter-target"></span>
              <div class="d-flex justify-content-end">
                <mark data-slot="ratioTimeLeftStr" data-slot-html></mark>
              </div>
        	  </div>
      	  </div>
        
      	  <!-- # task notes -->
      	  <div style="margin-top:1rem;">
      	    <div data-slot="note" data-template='#tmp-notes'></div>
      	  </div>
      	  
    	  </div>
    	  
    	  <div class="d-grid align-items-center" style="gap:0.5rem;">
    	    
    	    <!-- # collection save button (old) -->
    	    <div data-view-group="features" data-view-name="interactive-sequence-task-pick">
      	    <div class="d-flex justify-content-end flex-column" style="gap:0.3rem;">
        	    <button data-role="add-to-sequence">Add to sequence</button>
        	    <button data-role="move-to-sequence" data-view-group="task-view-mode" data-view-name="mission">Move to sequence</button>
      	    </div>
    	    </div>
    	    
    	    <div data-view-group="features" data-view-name-not="interactive-sequence-task-pick">
      	    <div class="d-flex justify-content-end" style="gap:0.5rem;">
              
      	      <!-- # start timer button -->
              <div>
                <button class="btn-start icon-mate" data-role="start" data-group="active not-running" title="Start">
                  play_arrow
                </button>
                <button class="btn-stop icon-mate" data-role="stop" data-group="active" title="Stop">
                  stop
                </button>
              </div>
              
      	    </div>
    	    </div>
    	    
    	  </div>
  	  
  	  </div>
  	  
  	  <!-- # task footer information -->
  	  
  	  <!-- # task toolbar -->
  	  <div class="container-task-toolbar">

    	  <div class="d-flex justify-content-between" data-slot="" data-template="#tmp-mission-buttons" style="padding:0.5rem;"></div>
        
        <div data-obj="tracking-status" style="height:4px;"></div>
      	
      	<div class="d-none">
        	<div class="NzA5ODc1NQ-progress-bar-container">
            <div class="NzA5ODc1NQ-progress-bar" data-role="progress-bar-container">
              <div data-role="progress-bar" class="NzA5ODc1NQ-progress-bar-fill"></div>
            </div>
          </div>
      	</div>
  	  </div>
  	  
  	  <!-- # running task indicator -->
    	<div class="task-progress-bar-container">
        <div class="task-progress-bar"></div>
      </div>
      
  	  <!-- # sequence container -->
  	  <div data-view-group="task" data-view-name="sequence">
        <!-- # sequence toolbar -->
        <div class="d-flex flex-wrap" style="padding:0.5rem;gap:0.3rem;">
          <button data-role="add-sequence-task">+ New</button>
          <button data-role="link-task-to-sequence-interactive-mode">Link a task</button>
          <button data-role="reset-count-active-seq">Reset repeat count</button>
          <button data-role="manage-sequence">Manage</button>
        </div>
        <div data-container="sequence-tasks"></div>
  	  </div>
      
  	</div>
  </template>
  
  <template id="tmp-task-simple">
    <!-- # container task simple mode -->
    
  	<div class="container-item pos-relative" data-obj="task" data-id="?" data-kind="task" data-view-group="task" data-view-states="">
  	  
  	  <!-- # simple mode : task body -->
  	  <div class="task-body-main d-flex gap-full" style="padding:0.3rem 0.5rem;">
  	  
    	  <div class="d-flex justify-content-between flex-grow" style="gap:0.3rem;">
    	    <div class="flex-1">
      	    <div data-slot="missionPath" data-slot-html></div>
      	    <span class="title" data-slot="title"></span>
    	    </div>
          <small>
            <mark data-slot="ratioTimeLeftStr" data-slot-html></mark>
      	  </small>
    	  </div>
    	  
    	  <!-- # simple mode : task toolbar -->
    	  <div class="container-task-toolbar d-flex gap-full">
      	  <div class="d-flex justify-content-between" data-slot="" data-template="#tmp-mission-buttons-simple"></div>
  	    </div>
    	  
  	  </div>
  	  
  	</div>
  	
  </template>

  <template id="tmp-list-sequence-task">
    <!-- # tmp-list-sequence-task -->
    <div class="item-sequence" data-kind="item-sequence-task" data-view-group="sequence-item" data-view-states="">
      <div class="d-flex">
        
        <!-- # sequence drag handle -->
        <div>
          <div class="d-flex align-items-center handle h-100" style="padding-left:4px;">
            <span class="icon-mate">drag_indicator</span>
          </div>
        </div>
        
        <!-- # sequence title -->
        <div class="word-break-word flex-1 align-items-center d-flex user-select-none" data-closest="title" style="padding:4px 10px;">
          <div class="d-flex justify-content-between w-100">
            <div>
              <div data-slot="linkedTaskPath" data-slot-html></div>
              <small>
                <span data-slot="title"></span>
                <div>
                  (<span data-slot="targetTimeStr"></span>) <span data-slot="timeLeftStr"></span>
                </div>
              </small>
            </div>
            <div class="d-flex align-items-center" style="gap:0.4rem;">
              <small class="icon-mate" data-view-group="sequence-item" data-view-name="linked-task" title="Linked task" style="opacity:0.4;font-size:0.8em;">link</small>
              <mark class="word-break-keep-all" data-slot="ratioTimeLeftStr" style="font-size:0.7rem;"></mark>
              <small class="font-weight-bold word-break-keep-all" data-slot="repeatCountProgressLabel" style="font-size:0.7rem;"></small>
            </div>
          </div>
        </div>
        
        <!-- # sequence manage actions -->
        <div class="d-flex align-items-center" style="padding:4px 8px;gap:0.3rem;">
          <div data-view-group="task" data-view-name="manage-sequence">
            <button class="icon-mate" data-role="delete-sequence-task" title="Delete">delete</button>
          </div>
          <button class="icon-mate" data-role="edit-sequence-task" title="Edit">edit</button>
        </div>
      </div>
    </div>
  </template>
  
  <template id="tmp-mission-buttons">
    <!-- # tmp-mission-buttons -->
    <div class="d-inline-flex" style="gap:0.2rem;">
      <button class="icon-mate" data-role="toggle-expand-sequence-task" title="Expand less sequence task" data-view-group="task" data-view-name="sequence">expand_less</button>
      <button class="icon-mate" data-role="toggle-expand-sequence-task" title="Expand sequence task" data-view-group="task" data-view-name-not="sequence">expand_more</button>
      <div data-view-group="task-view-mode" data-view-name-not="filter-target">
        <button class="btn-star icon-mate" data-role='star-task' title="Star this task">star</button>
      </div> 
      <!-- # actions mission -->
      <div class="d-flex">
        <button data-role="add-to-mission" class="icon-mate" title="Add to collection">playlist_add</button>
        <div data-view-group="task" data-view-name-not="collection-only">
          <button class="bg-danger icon-mate" data-role="remove-mission" title="Remove from collection">playlist_remove</button>
        </div>
        <div data-view-group="task" data-view-name="collection-only">
          <button class="bg-danger-high icon-mate" data-role="remove-mission" title="Remove from collection">delete</button>
        </div>
      </div>
      
      <div class="d-none">
        <button data-role='set-active' class="icon-mate" title='Focus on this task' data-group="not-running unarchived">track_changes</button>
      </div>
      <!--<button data-role='split-task' class="icon-mate" title='split'>call_split</button>-->
      <!--<button data-role='rename' class="icon-mate" title='Rename'>edit</button>-->
      <div data-view-group="task-view-mode" data-view-name-not="filter-target">
        <div class="d-inline-flex" style="gap:0.2rem;">
          <div data-view-group="task" data-view-name-not="sequence-mode">
            <button data-role='set-target' class="icon-mate" data-group="active not-running" title='Set task duration'>timer</button>
          </div>
          <div class="d-none">
            <button data-role='archive' class="icon-mate" data-group="not-running unarchived" title='Archive'>archive</button>
            <button data-role='unarchive' class="icon-mate" data-group="archived" title='Unarchive'>unarchive</button>
          </div>
          <div class="obsoletes">
            <button data-role='restart' class="icon-mate" data-group="not-running" title="Reset progress">restart_alt</button>
          </div>
          <button data-role='take-note' class="icon-mate d-none" data-group="active" title="Take a note">note_add</button>
          <button data-role='add-progress-minutes' class="icon-mate" data-group="active not-running" title="Add progress manually">more_time</button>
          <div style="padding:0.2rem;"></div>
          <button data-role='edit' class="icon-mate" data-group="not-running" title="Edit">Edit</button>
          <!--<button data-role='set-ratio' title='Set ratio' class="icon-mate">percent</button>-->
          <!-- <button data-role='add-label' class="icon-mate">label</button> -->
          <div style="padding-top:4px;"></div>
          <div data-group="not-running" style="padding-right:0.3rem;"></div>
          <!--<button data-role='delete' class="icon-mate" data-group="not-running" title='Delete'>delete</button>-->
        </div>
      </div>
    </div>
    
    <!-- # sub task buttons -->
    <div>
      <div class="d-flex" style="gap:0.2rem;">
        <!-- # action locate task -->
        <div data-view-group="task" data-view-name-not="collection-only">
          <div class="container-navigate-mission" data-view-group="task-view-mode" data-view-name="mission">
            <button class="icon-mate" data-role='navigate-mission' title='Open mission into view'>open_in_new</button>
          </div>
        </div>
        <div data-view-group="task-view-mode" data-view-name="task filter-target">
          <div class="container-create-sub d-none d-flex">
            <button data-role='add-sub-timer' class="icon-mate" data-group="active" title="Create sub task">account_tree</button>
          </div>
        </div>
        <!-- # sub task navigation -->
        <div data-view-group="task-view-mode" data-view-name="task">
          <div class="container-navigate d-flex d-none">
            <button class="icon-mate" data-role='navigate-sub' title='View sub missions'>chevron_right</button>
          </div>
        </div>
      </div>
    </div>
	  
    
  </template>
  
  <template id="tmp-mission-buttons-simple">
    <!-- # tmp-mission-buttons-simple -->
    <div class="d-inline-flex" style="gap:0.2rem;">
      <!-- # actions mission -->
      <div class="d-flex gap-half">
        <div>
          <button data-role="add-to-mission" class="icon-mate" title="Add to collection">playlist_add</button>
          <div data-view-group="task" data-view-name-not="collection-only">
            <button class="bg-danger icon-mate" data-role="remove-mission" title="Remove from collection">playlist_remove</button>
          </div>
        </div>
        
        <!-- # simple mode : action locate task -->
        <div>
          <button class="icon-mate" data-role='navigate-mission' title='Open mission into view'>open_in_new</button>
        </div>
      </div>
      
    </div>
    
  </template>
  
  <template id='tmp-notes'>
    <div data-kind="note" class="i-item align-items-center">
      <span class="d-none" data-slot='id'></span>
      <div class="d-none" data-slot='index'></div>

      <div class="d-flex justify-content-between">
        <div>
          <div data-kind='note.desc' data-slot='desc'></div>
          <div style="font-size:.7em;opacity:0.8;font-weight:bold;">
            <span data-slot='progressTimeLabel'></span><span data-kind='progress'></span>
          </div>
        </div>
        <div>
          <div style="padding-top:.3rem;"></div>
          <button class="icon-mate" data-role='rename-sub-task' style="padding:0 4px;">edit</button>
          <button class="icon-mate" data-role='start-sub-task' style="padding:0 4px;">play_arrow</button>
          <button class="icon-mate" data-role='delete-note' style="padding:0 4px;">close</button>
        </div>
      </div>
    </div>
  </template>

  <!-- # task modal -->
  <modal-v2 id="task-modal" data-view-group="form-task" data-view-states="add">
    <div class="modal" slot="content">
      
      <!-- task modal content-->
      <div class="ov-auto pos-relative">
        
        <!-- # task modal overlay background -->
        <div class="overlay-bg-default overlay-bg-task"></div>
        
        <div class="pos-relative" style="padding:1rem;">

          <div class="modal-header justify-content-between d-flex">
            <div class="flex-1 align-items-center d-flex">
              <h2 class="m-0 heading" data-view-group="form-task" data-view-name="add">New Task</h2>
              <h2 class="m-0 heading" data-view-group="form-task" data-view-name="edit">Edit Task</h2>
            </div>
            <div>
              <button class="icon-mate toggler btn-glass">close</button>
            </div>
          </div>
          
          
          <div class="pb-half"></div>
          <!-- task modal form -->
          <form data-name='task' class='submittable default-inline-flex-gap flex-column' data-callback='submit-task' data-obj="form-task">
            
            <div data-view-group="form-task" data-view-name="edit">
              <div class="text-right">
                <small>
                  <span>ID : </span><span data-id="readOnlyId"></span>
                </small>
              </div>
            </div>
            
            <input type="hidden" name="id"/>
            <input type="hidden" name="taskType"/>
            
            <div class="d-grid form-card-inner" style="gap:0.5rem;">
              
              <div>
                Title <input type="text" name='title' class="input-style-default"/>
              </div>
              <div>
                Duration <input type="text" name='durationTime' placeholder='example: 1h, 30m, or 1h30m' class="input-style-default"/>
              </div>
              <div>
                Target <input type="text" name='targetTime' class="input-style-default"/>
              </div>
              <div class="d-none">
                Repeat count (leave blank for none) <input type="number" min="1" name='finishCount' class="input-style-default"/>
              </div>
              <div data-view-group="form-task" data-view-name="edit" data-view-name-not="collection-only">
                Parent ID <input type="text" name='parent-id' class="input-style-default"/>
              </div>
              
            </div>
            <div class="mb-m"></div>
            
            <div class="pb-half"></div>
            
            <!-- # modal notes -->
            <div data-view-group="form-task" data-view-name="collection-only">
              <small style="font-size:0.75rem;">
                Note : You're editing/creating a collection-only task. To create a public task, go to <b>My Tasks</b> then create a new task.
              </small>
              <div class="pb-half"></div>
              <div class="pb-half"></div>
            </div>
            
            <!-- # task modal : form actions -->
            <div>
              <div data-view-group="form-task" data-view-name="add">
                <div class="d-flex justify-content-end">
                  <div>
                    <button class="toggler">Cancel</button>
                    <button class="btn-primary" data-role="btn-add">Add</button>
                  </div>
                </div>
              </div>
              <div data-view-group="form-task" data-view-name="edit">
                
                <div class="d-grid" style="gap:0.5rem;">
                
                  <div class="d-flex justify-content-between">
                    <div>
                      <div class="d-flex align-items-center" style="gap:0.5rem;">
                        <button class="icon-mate" title="Delete" type="button" data-onclick="delete-task-from-form">delete</button>
                      </div>
                    </div>
                    <div>
                      <button class="toggler">Cancel</button>
                      <button class="btn-primary" data-role="btn-edit">Update</button>
                    </div>
                  </div>
                  <div class="pb-half"></div>
                  
                  <!-- # task modal progress actions -->
                  <div class="d-flex justify-content-between">
                    <div class="d-flex align-items-center gap-half">
                      <button type="button" data-onclick="reset-progress-task-from-form">Reset progress</button>
                      <div data-view-group="build" data-view-name="dev">
                        <button type="button" data-onclick="distribute-progress-task-from-form">Distribute progress</button>
                      </div>
                    </div>
                  </div>
                
                </div>
                
              </div>
            </div>
            
          </form>

        </div>
        
      </div>
    </div>
  </modal-v2>
  
  <!-- # sequence task modal  -->
  <modal-v2 id="task-sequence-modal" data-view-group="form-task-sequence" data-view-states="add">
    <div class="modal" slot="content">
      
      <!-- modal content-->
      <div class="ov-auto pos-relative">
        
        <!-- # overlay background -->
        <div class="overlay-bg-default overlay-bg-sequence-task"></div>
        
        <div style="padding:1rem;" class="pos-relative">

          <div class="modal-header justify-content-between d-flex">
            <div class="flex-1 align-items-center d-flex">
              <h2 class="m-0 heading" data-view-group="form-task-sequence" data-view-name="add">Add Sequence Task</h2>
              <h2 class="m-0 heading" data-view-group="form-task-sequence" data-view-name="edit">Edit Sequence Task</h2>
            </div>
            <div>
              <button class="icon-mate toggler btn-glass">close</button>
            </div>
          </div>
          
          <div class="pb-half"></div>
          
          <!-- # form sequence task -->
          <form data-name="task" class="submittable default-inline-flex-gap flex-column" data-callback="submit-sequence-task" data-obj="form-task">
            
            <input type="hidden" name="id"/>
            <input type="hidden" name="taskId"/>
            
            <div class="d-grid form-card-inner" style="gap:0.5rem;">
            
              <div>
                Title <input type="text" name="title" class="input-style-default"/>
              </div>
              <div>
                Duration <input type="text" name="duration" placeholder="e.g. 7m, 15m20s, 1h20m" class="input-style-default"/>
              </div>
              <hr/>
              
              <!-- repeat options -->
              <div>
                <label class="user-select-none">
                  <input type="checkbox" name="useRepeat"/> 
                  Repeat this task
                </label>
              </div>
              <div>
                Repeat count <input type="number" name="repeatCount" min="2" value="2" class="input-style-default"/>
              </div>
              <div class="obsoletes" data-view-group="build" data-view-name="dev">
                Repeat rest duration <input type="text" name="repeatRestDurationTimeStr" placeholder="e.g. 30s, 3m, 15m20s" class="input-style-default"/>
              </div>
              
            </div><div class="mb-m"></div>
            
            <div data-view-group="form-task-sequence" data-view-name="add">
              <div class="text-right">
                <button class="toggler">Cancel</button>
                <button class="btn-primary" data-role="btn-add">Add</button>
              </div>
            </div>
            
            <div class="pb-half"></div>
            
            <!-- # sequence task modal : form action -->
            <div data-view-group="form-task-sequence" data-view-name="edit">

              <div class="d-grid" style="gap:0.5rem;">
                
                <div class="d-flex justify-content-between">
                  <div class="d-flex align-items-center" style="gap:0.5rem;">
                    <button class="icon-mate" type="button" data-onclick="delete-sequence-from-form">delete</button>
                  </div>
                  <div>
                    <button class="toggler">Cancel</button>
                    <button class="btn-primary" data-role="btn-edit">Update</button>
                  </div>
                </div>
                
                <div class="d-flex flex-column form-footer-card padding-container" style="gap:0.5rem;">
                
                  <div class="d-flex justify-content-between">
                    <button type="button" data-onclick="reset-progress-sequence-from-form">Reset progress</button>
                  </div>
                  <!-- open linked sequence -->
                  <div data-view-group="build" data-view-name="dev">
                    <div data-view-group="form-task-sequence" data-view-name="linked-task">
                      <div class="d-flex" style="gap:0.5rem;">
                        <button class="icon-mate" type="button" data-onclick="open-linked-sequence-from-form">open_in_new</button>
                        <button type="button" class="d-flex align-items-center" style="gap:0.3rem;" data-onclick="open-linked-sequence-priority-mapper">
                          <span>Open in Priority mapper</span> <span class="icon-mate">linear_scale</span>
                        </button>
                      </div>
                    </div>
                    <div class="pb-half"></div>
                  </div>
                
                </div>
                
              </div>
              
            </div>
            
          </form>

        </div>
      </div>
    </div>
  </modal-v2>
  
  <style>
    .popup {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 1;
      justify-content: center;
      align-items: center;
  }
  
  .popup-content {
      background-color: white;
      padding: 20px;
      border-radius: 5px;
      text-align: center;
  }
  </style>
  
  <!-- # modal mission target -->
  <modal-v2 id="modal-prompt">
    <div class="modal" slot="content">
      <!-- # modal content-->
      <div class="ov-auto">
        <div style="padding:1rem;">
          
          sample 


        </div>
      </div>
    </div>
  </modal-v2>

  <!-- # modal note -->
  <modal-v2 id="modal-note" class="is-modal">
    <div class="modal" slot="content">
      <!-- modal content-->
      <div class="ov-auto">
        <div style="padding:1rem;">

          New Note :
          <div class="pb-half"></div>
          <form class='submittable default-inline-flex-gap flex-column' data-callback='add-note'>
            <input type="hidden" name="id"/>
            <div>
              <input type="text" name='title' class="input-style-default"/>
            </div>
            <div>
              <button data-role='btn-add'>Add</button>
            </div>
          </form>

        </div>
      </div>
    </div>
  </modal-v2>
  
  <!-- # basic custom confirmation dialogue -->
  <div id="confirmationPopup" class="popup">
      <div class="popup-content">
          <p>Are you sure you want to proceed?</p>
          <button id="confirmYes">Yes</button>
          <button id="confirmNo">No</button>
      </div>
  </div>
  
  
  
  <script src="js/lib/sweetalert2@11.js"></script>
  
  <!-- # webcomponents -->
  <!-- ## modal-v2 -->
  <script src="modal-v2-utils.js"></script>

  <script src="service.js"></script>
  <script src="service-chrome.js"></script>
  <script src="js/lib/mousetrap.min.js"></script>
  <script src="js/lib/statelist@v1.0.2.min.js"></script>
  <script src="js/lib/templateslot.min.js"></script>
  
  <script src="js/component-loader.js"></script>
  <script src="index.js" type="module"></script>
  
  <script src="pwa-cacher.js"></script>

</body>
</html>